---
title: CMS收集器运作流程
icon: workflow
order: 3
---

# CMS收集器运作流程

## CMS收集器的四个主要阶段
- 初始标记(Initial Mark)：STW，标记GC Roots直接关联对象
- 并发标记(Concurrent Mark)：与用户线程并发执行，遍历对象图
- 重新标记(Remark)：STW，处理并发标记阶段变动的对象
- 并发清除(Concurrent Sweep)：与用户线程并发执行，回收垃圾对象

## 初始标记阶段详解
- 触发条件与时机选择
- 安全点(Safepoint)机制
- 根对象扫描策略
- 初始标记的性能特点
- 与ParNew收集的协作

## 并发标记阶段详解
- 三色标记算法的应用
- 增量更新(Incremental Update)机制
- 写屏障(Write Barrier)的实现
- 并发线程数量控制
- 标记栈与工作队列管理

## 重新标记阶段详解
- 处理并发标记期间的引用变化
- 增量更新的应用
- 并行重新标记的实现
- 重新标记的性能优化
- 暂停时间控制策略

## 并发清除阶段详解
- 并发清除的实现机制
- 空闲列表(Free List)管理
- 内存碎片的产生原因
- 清除效率与吞吐量
- 浮动垃圾的处理
