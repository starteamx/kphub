---
title: 集合操作常见陷阱
icon: trap
order: 6
---

# 集合操作常见陷阱

## 并发修改问题

- ConcurrentModificationException的原因与解决
- 迭代过程中修改集合的正确方法
- 快照迭代vs实时迭代的选择
- 并发集合的弱一致性视图
- 并发修改检测的实现机制

## 哈希冲突与相等性

- hashCode与equals不一致的问题
- 可变对象作为键的风险
- 哈希冲突导致的性能下降
- 自定义对象作为键的最佳实践
- 哈希表性能退化的诊断与修复

## 内存泄漏隐患

- 集合引用导致的对象滞留
- 缓存集合的内存泄漏风险
- 监听器集合的注册与注销
- 线程局部变量的清理机制
- 内存泄漏的检测与防范

## 序列化与深拷贝问题

- 集合序列化的特殊处理
- 深拷贝vs浅拷贝的选择
- 循环引用导致的序列化问题
- 自定义序列化控制机制
- 跨JVM版本的序列化兼容性

## 性能误区与陷阱

- 过度优化的常见误区
- 集合选择的性能误判
- 基准测试的常见错误
- JVM预热与即时编译影响
- 微基准测试的正确方法
