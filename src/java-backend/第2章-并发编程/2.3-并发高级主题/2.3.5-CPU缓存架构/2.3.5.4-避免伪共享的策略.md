---
title: 避免伪共享的策略
icon: strategy
order: 4
---

# 避免伪共享的策略

## 伪共享问题识别

- 性能分析工具的使用
- 伪共享的典型症状
- 多线程计数器的伪共享案例
- 并发队列中的伪共享问题

## 缓存行填充技术

- 手动填充(Manual Padding)
- Java中的@Contended注解
- 填充大小的选择考量
- JDK 9+中的缓存行大小获取API

## 数据结构设计优化

- 按线程分区的数据结构
- 独立缓存行的数据布局
- 读写分离的数据组织
- 批处理更新减少缓存同步

## 实际应用案例

- Disruptor框架中的伪共享优化
- Netty中的缓存行对齐技术
- JDK中的计数器优化(LongAdder)
- 高性能线程池的伪共享考量
