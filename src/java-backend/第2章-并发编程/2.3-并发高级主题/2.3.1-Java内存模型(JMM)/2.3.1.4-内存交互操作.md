---
title: 内存交互操作
icon: interaction
order: 4
---

# 内存交互操作

## JMM定义的八种操作

- lock(锁定)操作的语义与实现
- unlock(解锁)操作的语义与实现
- read(读取)操作的语义与实现
- load(载入)操作的语义与实现
- use(使用)操作的语义与实现
- assign(赋值)操作的语义与实现
- store(存储)操作的语义与实现
- write(写入)操作的语义与实现

## 操作的执行顺序规则

- 操作之间的先后关系约束
- 操作的原子性保证
- 操作组合的规则与限制
- 操作顺序对可见性的影响
- 操作顺序对有序性的影响

## 变量访问的完整过程

- 读取变量值的操作序列
- 修改变量值的操作序列
- 操作序列的原子性保证
- 操作序列的可能中断点
- 并发访问时的操作交错

## 内存交互操作的规则

- 不允许read和load操作之一单独出现
- 不允许store和write操作之一单独出现
- 不允许线程丢弃最近的assign操作
- 不允许线程无原因地将变量值回写
- 一个新变量只能在主内存中诞生
- 一个变量在同一时刻只允许一条线程对其进行lock操作
- 如果对一个变量执行lock操作，将会清空工作内存中此变量的值
- 对一个变量执行unlock操作前，必须先把此变量同步回主内存

## 操作的实现与优化

- JVM对内存操作的实现方式
- 硬件层面的操作支持
- 编译器对操作序列的优化
- 操作合并的条件与限制
- 操作重排序的安全边界
