---
title: æäº¤ä¿¡æ¯è§„èŒƒä¸Commitlint
icon: commit
order: 7
---

# æäº¤ä¿¡æ¯è§„èŒƒä¸Commitlint

è§„èŒƒçš„æäº¤ä¿¡æ¯æœ‰åŠ©äºç”Ÿæˆæ¸…æ™°çš„å˜æ›´æ—¥å¿—å’Œç†è§£é¡¹ç›®å†å²ã€‚æœ¬æ–‡å°†ä»‹ç»å¸¸è§çš„æäº¤ä¿¡æ¯è§„èŒƒï¼ˆå¦‚Angularè§„èŒƒï¼‰å’ŒCommitlintå·¥å…·çš„ä½¿ç”¨ï¼Œå¸®åŠ©å›¢é˜Ÿå»ºç«‹ç»Ÿä¸€çš„æäº¤ä¿¡æ¯æ ¼å¼ã€‚

## 1. æäº¤ä¿¡æ¯è§„èŒƒçš„é‡è¦æ€§

### 1.1 ä¸ºä»€ä¹ˆéœ€è¦è§„èŒƒæäº¤ä¿¡æ¯

Git æäº¤ä¿¡æ¯æ˜¯é¡¹ç›®å†å²çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè§„èŒƒçš„æäº¤ä¿¡æ¯å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **æé«˜å¯è¯»æ€§**ï¼šæ¸…æ™°æè¿°æ¯æ¬¡æäº¤çš„å†…å®¹å’Œç›®çš„
2. **ä¾¿äºåä½œ**ï¼šå¸®åŠ©å›¢é˜Ÿæˆå‘˜ç†è§£ä»£ç å˜æ›´çš„åŸå› å’Œå½±å“
3. **è‡ªåŠ¨åŒ–å·¥å…·æ”¯æŒ**ï¼šæ”¯æŒè‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—ï¼ˆCHANGELOGï¼‰
4. **ç‰ˆæœ¬è¿½è¸ª**ï¼šä¾¿äºè¿½è¸ªç‰¹æ€§ã€ä¿®å¤å’Œé‡å¤§å˜æ›´
5. **ç®€åŒ–ä»£ç å®¡æŸ¥**ï¼šæä¾›æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½¿ä»£ç å®¡æŸ¥æ›´é«˜æ•ˆ
6. **ä¿ƒè¿›è‰¯å¥½ä¹ æƒ¯**ï¼šé¼“åŠ±å¼€å‘è€…è¿›è¡Œå°è€Œæœ‰æ„ä¹‰çš„æäº¤

### 1.2 ä¸è§„èŒƒæäº¤ä¿¡æ¯çš„é—®é¢˜

ä¸è§„èŒƒçš„æäº¤ä¿¡æ¯ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š

- éš¾ä»¥ç†è§£å˜æ›´çš„ç›®çš„å’Œå†…å®¹
- æ— æ³•è‡ªåŠ¨ç”Ÿæˆæœ‰æ„ä¹‰çš„å˜æ›´æ—¥å¿—
- ä»£ç å®¡æŸ¥æ•ˆç‡ä½ä¸‹
- éš¾ä»¥è¿½è¸ªé—®é¢˜å’Œç‰¹æ€§
- é¡¹ç›®å†å²æ··ä¹±ï¼Œä¸åˆ©äºç»´æŠ¤

## 2. å¸¸è§çš„æäº¤ä¿¡æ¯è§„èŒƒ

### 2.1 Angular æäº¤è§„èŒƒ

Angular æäº¤è§„èŒƒæ˜¯æœ€æµè¡Œçš„æäº¤ä¿¡æ¯è§„èŒƒä¹‹ä¸€ï¼Œè¢«å¹¿æ³›é‡‡ç”¨ã€‚å…¶åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

å„éƒ¨åˆ†è¯´æ˜ï¼š

- **type**ï¼šæäº¤ç±»å‹ï¼Œè¡¨æ˜æœ¬æ¬¡æäº¤çš„æ€§è´¨
- **scope**ï¼ˆå¯é€‰ï¼‰ï¼šæäº¤å½±å“çš„èŒƒå›´
- **subject**ï¼šç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦
- **body**ï¼ˆå¯é€‰ï¼‰ï¼šè¯¦ç»†æè¿°ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œ
- **footer**ï¼ˆå¯é€‰ï¼‰ï¼šè„šæ³¨ï¼Œé€šå¸¸ç”¨äºå…³è” Issue æˆ–æ ‡è®°é‡å¤§å˜æ›´

#### å¸¸è§çš„æäº¤ç±»å‹ï¼ˆtypeï¼‰ï¼š

| ç±»å‹ | è¯´æ˜ |
|------|------|
| feat | æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ |
| fix | ä¿®å¤ bug |
| docs | æ–‡æ¡£æ›´æ–° |
| style | ä»£ç é£æ ¼ä¿®æ”¹ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ |
| refactor | é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰ |
| perf | æ€§èƒ½ä¼˜åŒ– |
| test | æµ‹è¯•ç›¸å…³ |
| build | æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–å˜æ›´ |
| ci | CI é…ç½®æ–‡ä»¶å’Œè„šæœ¬å˜æ›´ |
| chore | å…¶ä»–ä¸ä¿®æ”¹æºä»£ç æˆ–æµ‹è¯•æ–‡ä»¶çš„å˜æ›´ |
| revert | æ’¤é”€ä¹‹å‰çš„æäº¤ |

#### ç¤ºä¾‹ï¼š

```
feat(user): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½

å®ç°äº†åŸºäºJWTçš„ç”¨æˆ·ç™»å½•è®¤è¯æœºåˆ¶ï¼ŒåŒ…æ‹¬ï¼š
- ç™»å½•è¡¨å•éªŒè¯
- å¯†ç åŠ å¯†å¤„ç†
- Tokenç”Ÿæˆå’ŒéªŒè¯

Closes #123
```

### 2.2 Conventional Commits è§„èŒƒ

Conventional Commits æ˜¯åŸºäº Angular è§„èŒƒçš„ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼Œå·²æˆä¸ºäº‹å®ä¸Šçš„è¡Œä¸šæ ‡å‡†ã€‚å…¶åŸºæœ¬æ ¼å¼ä¸ºï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

Conventional Commits è§„èŒƒä¸ Angular è§„èŒƒéå¸¸ç›¸ä¼¼ï¼Œä½†æ›´åŠ çµæ´»å’Œç®€æ´ã€‚

### 2.3 å…¶ä»–æäº¤è§„èŒƒ

é™¤äº† Angular å’Œ Conventional Commits è§„èŒƒå¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›æäº¤è§„èŒƒï¼š

- **Ember è§„èŒƒ**ï¼šç±»ä¼¼äº Angular è§„èŒƒï¼Œä½†æœ‰ä¸€äº›ç‰¹å®šäº Ember.js çš„ç±»å‹
- **jQuery è§„èŒƒ**ï¼šä½¿ç”¨ç‰¹å®šçš„å‰ç¼€å¦‚ `[Event]`, `[Ajax]` ç­‰
- **Atom è§„èŒƒ**ï¼šä½¿ç”¨ emoji è¡¨æƒ…ç¬¦å·ä½œä¸ºæäº¤ç±»å‹çš„å‰ç¼€

## 3. Commitlint å·¥å…·ä»‹ç»

### 3.1 ä»€ä¹ˆæ˜¯ Commitlint

Commitlint æ˜¯ä¸€ä¸ªç”¨äºæ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒçš„å·¥å…·ã€‚å®ƒå¯ä»¥ï¼š

- éªŒè¯æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆé…ç½®çš„è§„èŒƒ
- ä¸ Git Hooks é›†æˆï¼Œåœ¨æäº¤å‰è‡ªåŠ¨æ£€æŸ¥
- æ”¯æŒè‡ªå®šä¹‰è§„åˆ™å’Œé…ç½®
- ä¸ CI/CD æµç¨‹é›†æˆ

### 3.2 å®‰è£… Commitlint

ä½¿ç”¨ npm æˆ– yarn å®‰è£… Commitlintï¼š

```bash
# ä½¿ç”¨ npm
npm install --save-dev @commitlint/cli @commitlint/config-conventional

# ä½¿ç”¨ yarn
yarn add --dev @commitlint/cli @commitlint/config-conventional

# ä½¿ç”¨ pnpm
pnpm add --save-dev @commitlint/cli @commitlint/config-conventional
```

### 3.3 é…ç½® Commitlint

åˆ›å»º Commitlint é…ç½®æ–‡ä»¶ `commitlint.config.js`ï¼š

```javascript
module.exports = {
  extends: ['@commitlint/config-conventional'],
  // è‡ªå®šä¹‰è§„åˆ™
  rules: {
    // ç±»å‹æšä¸¾
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'docs',
        'style',
        'refactor',
        'perf',
        'test',
        'build',
        'ci',
        'chore',
        'revert',
      ],
    ],
    // ç±»å‹å°å†™
    'type-case': [2, 'always', 'lower-case'],
    // ç±»å‹ä¸èƒ½ä¸ºç©º
    'type-empty': [2, 'never'],
    // æè¿°ä¸èƒ½ä¸ºç©º
    'subject-empty': [2, 'never'],
    // æè¿°ä¸èƒ½ä»¥.ç»“å°¾
    'subject-full-stop': [2, 'never', '.'],
    // æè¿°ä½¿ç”¨å°å†™
    'subject-case': [0, 'always', 'lower-case'],
    // bodyæ¢è¡Œ
    'body-leading-blank': [1, 'always'],
    // footeræ¢è¡Œ
    'footer-leading-blank': [1, 'always'],
  },
};
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ JSON æ ¼å¼çš„é…ç½®æ–‡ä»¶ `.commitlintrc.json`ï¼š

```json
{
  "extends": ["@commitlint/config-conventional"],
  "rules": {
    "type-enum": [
      2,
      "always",
      [
        "feat",
        "fix",
        "docs",
        "style",
        "refactor",
        "perf",
        "test",
        "build",
        "ci",
        "chore",
        "revert"
      ]
    ]
  }
}
```

## 4. ä¸ Husky é›†æˆ

### 4.1 å®‰è£… Husky

Husky æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† Git Hooks çš„å·¥å…·ï¼Œå¯ä»¥ä¸ Commitlint ç»“åˆä½¿ç”¨ï¼š

```bash
# å®‰è£… Husky
npm install --save-dev husky
```

### 4.2 é…ç½® Husky v7+

å¯¹äº Husky v7 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š

```bash
# åˆå§‹åŒ– Husky
npx husky install

# æ·»åŠ  commit-msg hook
npx husky add .husky/commit-msg "npx --no -- commitlint --edit $1"
```

åœ¨ `package.json` ä¸­æ·»åŠ  prepare è„šæœ¬ï¼Œç¡®ä¿å…¶ä»–å¼€å‘è€…å®‰è£…ä¾èµ–åè‡ªåŠ¨è®¾ç½® Huskyï¼š

```json
{
  "scripts": {
    "prepare": "husky install"
  }
}
```

### 4.3 é…ç½® Husky v4ï¼ˆæ—§ç‰ˆæœ¬ï¼‰

å¯¹äº Husky v4 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š

```json
{
  "husky": {
    "hooks": {
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  }
}
```

## 5. æäº¤ä¿¡æ¯æ¨¡æ¿ä¸å·¥å…·

### 5.1 ä½¿ç”¨ Commitizen

Commitizen æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å¼•å¯¼å¼€å‘è€…æŒ‰ç…§è§„èŒƒç¼–å†™æäº¤ä¿¡æ¯ï¼š

```bash
# å®‰è£… Commitizen
npm install --save-dev commitizen

# å®‰è£…é€‚é…å™¨
npm install --save-dev cz-conventional-changelog

# é…ç½® package.json
```

åœ¨ `package.json` ä¸­æ·»åŠ é…ç½®ï¼š

```json
{
  "scripts": {
    "commit": "cz"
  },
  "config": {
    "commitizen": {
      "path": "cz-conventional-changelog"
    }
  }
}
```

ä½¿ç”¨ Commitizen æäº¤ä»£ç ï¼š

```bash
# ä½¿ç”¨ npm è„šæœ¬
npm run commit

# æˆ–ä½¿ç”¨ npx
npx cz
```

Commitizen ä¼šä»¥äº¤äº’å¼æ–¹å¼å¼•å¯¼ä½ å¡«å†™å„ä¸ªå­—æ®µï¼š

1. é€‰æ‹©æäº¤ç±»å‹ï¼ˆtypeï¼‰
2. è¾“å…¥å½±å“èŒƒå›´ï¼ˆscopeï¼‰
3. è¾“å…¥ç®€çŸ­æè¿°ï¼ˆsubjectï¼‰
4. è¾“å…¥è¯¦ç»†æè¿°ï¼ˆbodyï¼‰
5. è¯¢é—®æ˜¯å¦æœ‰é‡å¤§å˜æ›´ï¼ˆbreaking changesï¼‰
6. è¯¢é—®æ˜¯å¦å…³è” Issue

### 5.2 è‡ªå®šä¹‰ Commitizen é€‚é…å™¨

å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ Commitizen é€‚é…å™¨ï¼Œä»¥æ»¡è¶³ç‰¹å®šé¡¹ç›®çš„éœ€æ±‚ï¼š

```bash
# å®‰è£…è‡ªå®šä¹‰é€‚é…å™¨å·¥å…·
npm install --save-dev cz-customizable

# é…ç½® package.json
```

åœ¨ `package.json` ä¸­ä¿®æ”¹é…ç½®ï¼š

```json
{
  "config": {
    "commitizen": {
      "path": "cz-customizable"
    }
  }
}
```

åˆ›å»º `.cz-config.js` é…ç½®æ–‡ä»¶ï¼š

```javascript
module.exports = {
  types: [
    { value: 'feat', name: 'feat:     æ–°åŠŸèƒ½' },
    { value: 'fix', name: 'fix:      ä¿®å¤Bug' },
    { value: 'docs', name: 'docs:     æ–‡æ¡£æ›´æ–°' },
    { value: 'style', name: 'style:    ä»£ç é£æ ¼å˜æ›´' },
    { value: 'refactor', name: 'refactor: ä»£ç é‡æ„' },
    { value: 'perf', name: 'perf:     æ€§èƒ½ä¼˜åŒ–' },
    { value: 'test', name: 'test:     æµ‹è¯•ç›¸å…³' },
    { value: 'build', name: 'build:    æ„å»ºç³»ç»Ÿå˜æ›´' },
    { value: 'ci', name: 'ci:       CIé…ç½®å˜æ›´' },
    { value: 'chore', name: 'chore:    å…¶ä»–å˜æ›´' },
    { value: 'revert', name: 'revert:   æ’¤é”€æäº¤' }
  ],
  scopes: [
    { name: 'components' },
    { name: 'utils' },
    { name: 'styles' },
    { name: 'deps' },
    { name: 'other' }
  ],
  messages: {
    type: 'é€‰æ‹©å˜æ›´ç±»å‹:',
    scope: 'é€‰æ‹©å½±å“èŒƒå›´ (å¯é€‰):',
    subject: 'è¾“å…¥ç®€çŸ­æè¿°:',
    body: 'è¾“å…¥è¯¦ç»†æè¿° (å¯é€‰):',
    breaking: 'åˆ—å‡ºé‡å¤§å˜æ›´ (å¯é€‰):',
    footer: 'åˆ—å‡ºå…³è”Issue (å¯é€‰):',
    confirmCommit: 'ç¡®è®¤æäº¤ä»¥ä¸Šä¿¡æ¯?'
  },
  allowBreakingChanges: ['feat', 'fix', 'refactor'],
  subjectLimit: 100,
  breaklineChar: '|'
};
```

### 5.3 ä½¿ç”¨ Git æäº¤æ¨¡æ¿

å¯ä»¥åˆ›å»º Git æäº¤æ¨¡æ¿ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼š

1. åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ `.gitmessage`ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>

# ç±»å‹è¯´æ˜:
#   feat:     æ–°åŠŸèƒ½
#   fix:      ä¿®å¤Bug
#   docs:     æ–‡æ¡£æ›´æ–°
#   style:    ä»£ç é£æ ¼å˜æ›´
#   refactor: ä»£ç é‡æ„
#   perf:     æ€§èƒ½ä¼˜åŒ–
#   test:     æµ‹è¯•ç›¸å…³
#   build:    æ„å»ºç³»ç»Ÿå˜æ›´
#   ci:       CIé…ç½®å˜æ›´
#   chore:    å…¶ä»–å˜æ›´
#   revert:   æ’¤é”€æäº¤
```

2. é…ç½® Git ä½¿ç”¨è¯¥æ¨¡æ¿ï¼š

```bash
git config --local commit.template .gitmessage
```

## 6. è‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—

### 6.1 ä½¿ç”¨ standard-version

standard-version æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†å’Œå˜æ›´æ—¥å¿—ç”Ÿæˆå·¥å…·ï¼š

```bash
# å®‰è£… standard-version
npm install --save-dev standard-version
```

åœ¨ `package.json` ä¸­æ·»åŠ è„šæœ¬ï¼š

```json
{
  "scripts": {
    "release": "standard-version"
  }
}
```

è¿è¡Œå‘å¸ƒå‘½ä»¤ï¼š

```bash
npm run release
```

standard-version ä¼šè‡ªåŠ¨ï¼š
1. æ ¹æ®æäº¤ä¿¡æ¯ç¡®å®šç‰ˆæœ¬å·
2. æ›´æ–° package.json ä¸­çš„ç‰ˆæœ¬
3. ç”Ÿæˆæˆ–æ›´æ–° CHANGELOG.md
4. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
5. æäº¤å˜æ›´

### 6.2 ä½¿ç”¨ conventional-changelog

conventional-changelog æ˜¯ä¸€ä¸ªæ›´çµæ´»çš„å˜æ›´æ—¥å¿—ç”Ÿæˆå·¥å…·ï¼š

```bash
# å®‰è£… conventional-changelog
npm install --save-dev conventional-changelog-cli
```

åœ¨ `package.json` ä¸­æ·»åŠ è„šæœ¬ï¼š

```json
{
  "scripts": {
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s"
  }
}
```

ç”Ÿæˆå˜æ›´æ—¥å¿—ï¼š

```bash
npm run changelog
```

### 6.3 é…ç½® .versionrc

å¯ä»¥åˆ›å»º `.versionrc` æ–‡ä»¶è‡ªå®šä¹‰å˜æ›´æ—¥å¿—çš„ç”Ÿæˆï¼š

```json
{
  "types": [
    {"type": "feat", "section": "âœ¨ æ–°åŠŸèƒ½"},
    {"type": "fix", "section": "ğŸ› Bugä¿®å¤"},
    {"type": "docs", "section": "ğŸ“ æ–‡æ¡£æ›´æ–°"},
    {"type": "style", "section": "ğŸ’„ ä»£ç é£æ ¼"},
    {"type": "refactor", "section": "â™»ï¸ ä»£ç é‡æ„"},
    {"type": "perf", "section": "âš¡ï¸ æ€§èƒ½ä¼˜åŒ–"},
    {"type": "test", "section": "âœ… æµ‹è¯•"},
    {"type": "build", "section": "ğŸ“¦ æ„å»ºç³»ç»Ÿ"},
    {"type": "ci", "section": "ğŸ‘· CIé…ç½®"},
    {"type": "chore", "section": "ğŸ”§ å…¶ä»–å˜æ›´"},
    {"type": "revert", "section": "âª æ’¤é”€å˜æ›´"}
  ],
  "releaseCommitMessageFormat": "chore(release): v{{currentTag}}"
}
```

## 7. åœ¨ CI/CD ä¸­ä½¿ç”¨ Commitlint

### 7.1 åœ¨ GitHub Actions ä¸­ä½¿ç”¨ Commitlint

å¯ä»¥åœ¨ GitHub Actions ä¸­é…ç½® Commitlintï¼Œç¡®ä¿æ‰€æœ‰æäº¤éƒ½ç¬¦åˆè§„èŒƒï¼š

```yaml
# .github/workflows/commitlint.yml
name: Commitlint

on: [pull_request]

jobs:
  commitlint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v2
        with:
          node-version: '16'
      - run: npm install --save-dev @commitlint/cli @commitlint/config-conventional
      - name: Validate PR commits
        run: npx commitlint --from ${{ github.event.pull_request.base.sha }} --to ${{ github.event.pull_request.head.sha }} --verbose
```

### 7.2 åœ¨ GitLab CI ä¸­ä½¿ç”¨ Commitlint

åœ¨ GitLab CI ä¸­é…ç½® Commitlintï¼š

```yaml
# .gitlab-ci.yml
commitlint:
  stage: validate
  image: node:16
  script:
    - npm install --save-dev @commitlint/cli @commitlint/config-conventional
    - npx commitlint --from $(git merge-base origin/main HEAD) --to HEAD --verbose
  only:
    - merge_requests
```

### 7.3 åœ¨ Jenkins ä¸­ä½¿ç”¨ Commitlint

åœ¨ Jenkins æµæ°´çº¿ä¸­é…ç½® Commitlintï¼š

```groovy
// Jenkinsfile
pipeline {
    agent {
        docker {
            image 'node:16'
        }
    }
    stages {
        stage('Commitlint') {
            steps {
                sh 'npm install --save-dev @commitlint/cli @commitlint/config-conventional'
                sh 'npx commitlint --from HEAD~10 --to HEAD --verbose'
            }
        }
    }
}
```

## 8. å›¢é˜Ÿåä½œæœ€ä½³å®è·µ

### 8.1 åˆ¶å®šå›¢é˜Ÿæäº¤è§„èŒƒ

ä¸ºäº†åœ¨å›¢é˜Ÿä¸­æœ‰æ•ˆæ¨è¡Œæäº¤ä¿¡æ¯è§„èŒƒï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æ­¥éª¤ï¼š

1. **åˆ¶å®šæ–‡æ¡£**ï¼šåˆ›å»ºè¯¦ç»†çš„æäº¤è§„èŒƒæ–‡æ¡£ï¼ŒåŒ…æ‹¬ç¤ºä¾‹å’Œå¸¸è§é—®é¢˜
2. **å›¢é˜ŸåŸ¹è®­**ï¼šå¯¹å›¢é˜Ÿæˆå‘˜è¿›è¡ŒåŸ¹è®­ï¼Œç¡®ä¿å¤§å®¶ç†è§£è§„èŒƒçš„é‡è¦æ€§å’Œä½¿ç”¨æ–¹æ³•
3. **å·¥å…·æ”¯æŒ**ï¼šé…ç½® Commitlintã€Commitizen ç­‰å·¥å…·ï¼Œç®€åŒ–è§„èŒƒæ‰§è¡Œ
4. **ä»£ç å®¡æŸ¥**ï¼šåœ¨ä»£ç å®¡æŸ¥ä¸­å…³æ³¨æäº¤ä¿¡æ¯è´¨é‡
5. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®å›¢é˜Ÿåé¦ˆä¸æ–­å®Œå–„è§„èŒƒ

### 8.2 å¤„ç†ç‰¹æ®Šæƒ…å†µ

åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦çµæ´»å¤„ç†æäº¤ä¿¡æ¯è§„èŒƒï¼š

1. **åˆå¹¶æäº¤**ï¼šä½¿ç”¨ `git rebase -i` åˆå¹¶å¤šä¸ªå°æäº¤ï¼Œåˆ›å»ºä¸€ä¸ªç¬¦åˆè§„èŒƒçš„æäº¤
2. **ä¿®æ”¹æäº¤ä¿¡æ¯**ï¼šä½¿ç”¨ `git commit --amend` ä¿®æ”¹æœ€è¿‘çš„æäº¤ä¿¡æ¯
3. **ç´§æ€¥ä¿®å¤**ï¼šåœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸´æ—¶æ”¾å®½è§„èŒƒè¦æ±‚ï¼Œä½†äº‹ååº”è¯¥è§„èŒƒåŒ–æäº¤ä¿¡æ¯

### 8.3 æäº¤ä¿¡æ¯è§„èŒƒä¸åˆ†æ”¯ç­–ç•¥ç»“åˆ

æäº¤ä¿¡æ¯è§„èŒƒå¯ä»¥ä¸åˆ†æ”¯ç­–ç•¥ç»“åˆï¼Œæé«˜é¡¹ç›®ç®¡ç†æ•ˆç‡ï¼š

1. **ç‰¹æ€§åˆ†æ”¯**ï¼šä½¿ç”¨ `feat` ç±»å‹ï¼Œå¹¶åœ¨ scope ä¸­æ ‡æ˜ç‰¹æ€§åç§°
2. **ä¿®å¤åˆ†æ”¯**ï¼šä½¿ç”¨ `fix` ç±»å‹ï¼Œå¹¶å…³è”ç›¸åº”çš„ Issue
3. **å‘å¸ƒåˆ†æ”¯**ï¼šä½¿ç”¨ `chore(release)` ç±»å‹ï¼Œæ ‡è®°ç‰ˆæœ¬å‘å¸ƒ
4. **çƒ­ä¿®å¤åˆ†æ”¯**ï¼šä½¿ç”¨ `fix` ç±»å‹ï¼Œå¹¶æ ‡è®°ä¸º `hotfix`

## 9. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 9.1 æäº¤è¢«æ‹’ç»

**é—®é¢˜**ï¼šæäº¤æ—¶å‡ºç° "Commit message does not match pattern" é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆé…ç½®çš„è§„èŒƒ
2. ä½¿ç”¨ `git commit --amend` ä¿®æ”¹æäº¤ä¿¡æ¯
3. ä½¿ç”¨ Commitizen ç­‰å·¥å…·è¾…åŠ©ç¼–å†™æäº¤ä¿¡æ¯

### 9.2 è§„åˆ™è¿‡äºä¸¥æ ¼

**é—®é¢˜**ï¼šå›¢é˜Ÿæˆå‘˜æŠ±æ€¨æäº¤è§„èŒƒè¿‡äºä¸¥æ ¼ï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é€‚å½“æ”¾å®½è§„åˆ™ï¼Œä¾‹å¦‚å°†æŸäº›è§„åˆ™çš„çº§åˆ«ä» error è°ƒæ•´ä¸º warning
2. æä¾›æ›´å¤šå·¥å…·æ”¯æŒï¼Œå¦‚ Commitizen
3. é€æ­¥å¼•å…¥è§„èŒƒï¼Œå…ˆä»æ ¸å¿ƒè§„åˆ™å¼€å§‹

```javascript
// commitlint.config.js ç¤ºä¾‹ - æ”¾å®½è§„åˆ™
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'scope-case': [0], // ç¦ç”¨ scope å¤§å°å†™æ£€æŸ¥
    'subject-case': [0], // ç¦ç”¨ subject å¤§å°å†™æ£€æŸ¥
    'body-max-line-length': [1, 'always', 100] // å°† body è¡Œé•¿åº¦é™åˆ¶æ”¹ä¸ºè­¦å‘Šçº§åˆ«
  }
};
```

### 9.3 ä¸ç°æœ‰å·¥ä½œæµé›†æˆ

**é—®é¢˜**ï¼šå¦‚ä½•å°†æäº¤ä¿¡æ¯è§„èŒƒä¸ç°æœ‰çš„å¼€å‘å·¥ä½œæµé›†æˆã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é€æ­¥å¼•å…¥ï¼Œå…ˆåœ¨æ–°é¡¹ç›®æˆ–æ–°ç‰¹æ€§ä¸­è¯•è¡Œ
2. æä¾›è¯¦ç»†çš„è¿ç§»æŒ‡å—å’Œå·¥å…·æ”¯æŒ
3. è®¾ç½®è¿‡æ¸¡æœŸï¼Œåœ¨æ­¤æœŸé—´ä»…å‘å‡ºè­¦å‘Šè€Œä¸é˜»æ­¢æäº¤

### 9.4 å¤šè¯­è¨€å›¢é˜Ÿ

**é—®é¢˜**ï¼šå›½é™…åŒ–å›¢é˜Ÿä¸­ï¼Œä¸åŒæˆå‘˜å¯èƒ½ä½¿ç”¨ä¸åŒè¯­è¨€ç¼–å†™æäº¤ä¿¡æ¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç»Ÿä¸€ä½¿ç”¨è‹±æ–‡ä½œä¸ºæäº¤ä¿¡æ¯è¯­è¨€
2. åœ¨ body éƒ¨åˆ†å¯ä»¥ä½¿ç”¨å…¶ä»–è¯­è¨€æä¾›æ›´è¯¦ç»†çš„æè¿°
3. ä½¿ç”¨æ¨¡æ¿å’Œç¤ºä¾‹å¸®åŠ©éè‹±è¯­æ¯è¯­çš„å¼€å‘è€…

## 10. é«˜çº§åº”ç”¨

### 10.1 è‡ªå®šä¹‰æäº¤ç±»å‹

é™¤äº†æ ‡å‡†çš„æäº¤ç±»å‹å¤–ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å®šä¹‰è‡ªå®šä¹‰ç±»å‹ï¼š

```javascript
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        // æ ‡å‡†ç±»å‹
        'feat', 'fix', 'docs', 'style', 'refactor', 'perf', 'test', 'build', 'ci', 'chore', 'revert',
        // è‡ªå®šä¹‰ç±»å‹
        'ui', // UI ç›¸å…³å˜æ›´
        'i18n', // å›½é™…åŒ–ç›¸å…³
        'a11y', // å¯è®¿é—®æ€§ç›¸å…³
        'data', // æ•°æ®æ¨¡å‹å˜æ›´
        'config' // é…ç½®å˜æ›´
      ]
    ]
  }
};
```

### 10.2 é›†æˆè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

æäº¤ä¿¡æ¯è§„èŒƒå¯ä»¥ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰ç»“åˆï¼š

- `feat` ç±»å‹é€šå¸¸å¯¹åº”æ¬¡ç‰ˆæœ¬å·ï¼ˆminorï¼‰å¢åŠ 
- å¸¦æœ‰ `BREAKING CHANGE` çš„æäº¤å¯¹åº”ä¸»ç‰ˆæœ¬å·ï¼ˆmajorï¼‰å¢åŠ 
- `fix` ç±»å‹é€šå¸¸å¯¹åº”ä¿®è®¢ç‰ˆæœ¬å·ï¼ˆpatchï¼‰å¢åŠ 

å¯ä»¥ä½¿ç”¨ semantic-release è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ï¼š

```bash
# å®‰è£… semantic-release
npm install --save-dev semantic-release

# é…ç½® package.json
```

```json
{
  "scripts": {
    "semantic-release": "semantic-release"
  },
  "release": {
    "branches": ["main"]
  }
}
```

### 10.3 æäº¤ä¿¡æ¯æœ¬åœ°åŒ–

å¯¹äºä¸»è¦ä½¿ç”¨éè‹±è¯­çš„å›¢é˜Ÿï¼Œå¯ä»¥è€ƒè™‘æœ¬åœ°åŒ–æäº¤ä¿¡æ¯è§„èŒƒï¼š

```javascript
// .cz-config.js
module.exports = {
  types: [
    { value: 'feat', name: 'ç‰¹æ€§: æ–°å¢åŠŸèƒ½' },
    { value: 'fix', name: 'ä¿®å¤: ä¿®å¤ç¼ºé™·' },
    { value: 'docs', name: 'æ–‡æ¡£: æ–‡æ¡£å˜æ›´' },
    { value: 'style', name: 'æ ¼å¼: ä»£ç æ ¼å¼å˜æ›´' },
    { value: 'refactor', name: 'é‡æ„: ä»£ç é‡æ„' },
    { value: 'perf', name: 'æ€§èƒ½: æ€§èƒ½ä¼˜åŒ–' },
    { value: 'test', name: 'æµ‹è¯•: æµ‹è¯•ç›¸å…³' },
    { value: 'build', name: 'æ„å»º: æ„å»ºç³»ç»Ÿå˜æ›´' },
    { value: 'ci', name: 'é›†æˆ: CIé…ç½®å˜æ›´' },
    { value: 'chore', name: 'æ‚é¡¹: å…¶ä»–å˜æ›´' },
    { value: 'revert', name: 'å›é€€: æ’¤é”€æäº¤' }
  ],
  // å…¶ä»–é…ç½®...
};
```

ä½†éœ€è¦æ³¨æ„ï¼Œæäº¤ä¿¡æ¯çš„ typeã€scope ç­‰å…³é”®éƒ¨åˆ†ä»åº”ä½¿ç”¨è‹±æ–‡ï¼Œä»¥ä¿æŒå·¥å…·å…¼å®¹æ€§ã€‚

## 11. æ€»ç»“

è§„èŒƒçš„æäº¤ä¿¡æ¯æ˜¯é«˜è´¨é‡é¡¹ç›®ç®¡ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚é€šè¿‡é‡‡ç”¨ Angular æäº¤è§„èŒƒæˆ– Conventional Commits è§„èŒƒï¼Œå¹¶ç»“åˆ Commitlintã€Commitizen ç­‰å·¥å…·ï¼Œå¯ä»¥æ˜¾è‘—æé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œåä½œæ•ˆç‡ã€‚

ä¸»è¦æ”¶ç›ŠåŒ…æ‹¬ï¼š

1. **æ¸…æ™°çš„é¡¹ç›®å†å²**ï¼šæ¯ä¸ªæäº¤éƒ½æœ‰æ˜ç¡®çš„ç›®çš„å’Œå½±å“èŒƒå›´
2. **è‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†**ï¼šåŸºäºæäº¤ä¿¡æ¯è‡ªåŠ¨ç¡®å®šç‰ˆæœ¬å·
3. **è‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—**ï¼šå‡å°‘æ‰‹åŠ¨ç»´æŠ¤æ–‡æ¡£çš„å·¥ä½œé‡
4. **æé«˜å›¢é˜Ÿåä½œæ•ˆç‡**ï¼šç»Ÿä¸€çš„æäº¤æ ¼å¼ä¾¿äºç†è§£å’Œå®¡æŸ¥
5. **ä¿ƒè¿›è‰¯å¥½çš„å¼€å‘ä¹ æƒ¯**ï¼šé¼“åŠ±å°è€Œæœ‰æ„ä¹‰çš„æäº¤

é€šè¿‡æœ¬æ–‡ä»‹ç»çš„å·¥å…·å’Œæœ€ä½³å®è·µï¼Œå›¢é˜Ÿå¯ä»¥è½»æ¾å®æ–½æäº¤ä¿¡æ¯è§„èŒƒï¼Œå»ºç«‹æ›´åŠ ä¸“ä¸šå’Œé«˜æ•ˆçš„å¼€å‘æµç¨‹ã€‚

## å‚è€ƒèµ„æ–™

1. [Conventional Commits è§„èŒƒ](https://www.conventionalcommits.org/)
2. [Angular æäº¤ä¿¡æ¯è§„èŒƒ](https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit)
3. [Commitlint å®˜æ–¹æ–‡æ¡£](https://commitlint.js.org/)
4. [Commitizen å®˜æ–¹æ–‡æ¡£](http://commitizen.github.io/cz-cli/)
5. [Husky å®˜æ–¹æ–‡æ¡£](https://typicode.github.io/husky/)
6. [semantic-release å®˜æ–¹æ–‡æ¡£](https://semantic-release.gitbook.io/)
7. [standard-version å®˜æ–¹æ–‡æ¡£](https://github.com/conventional-changelog/standard-version)
8. [conventional-changelog å®˜æ–¹æ–‡æ¡£](https://github.com/conventional-changelog/conventional-changelog)
9. [è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ](https://semver.org/)
10. [Git æäº¤æœ€ä½³å®è·µ](https://github.com/trein/dev-best-practices/wiki/Git-Commit-Best-Practices)