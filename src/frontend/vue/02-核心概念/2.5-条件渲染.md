æˆ‘å°†ä¸ºæ‚¨ç¼–å†™ä¸€ä»½å…³äºVueæ¡ä»¶æ¸²æŸ“çš„è¯¦ç»†æ–‡æ¡£ï¼Œé€‚åˆä¸åŒçº§åˆ«çš„å¼€å‘è€…é˜…è¯»ã€‚

```markdown:c:\project\kphub\src\frontend\vue\02-åŸºç¡€\2.5-æ¡ä»¶æ¸²æŸ“.md
---
title: æ¡ä»¶æ¸²æŸ“
icon: condition
order: 5
---

# æ¡ä»¶æ¸²æŸ“

æ¡ä»¶æ¸²æŸ“å…è®¸æˆ‘ä»¬æ ¹æ®ä¸åŒçš„æ¡ä»¶æ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚æœ¬æ–‡å°†ä»‹ç»Vueä¸­çš„æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼ŒåŒ…æ‹¬v-ifã€v-elseã€v-else-ifã€v-showç­‰å†…å®¹ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ¡ä»¶æ¸²æŸ“æ–¹å¼çš„åŒºåˆ«å’Œé€‚ç”¨åœºæ™¯ã€‚

## ä»€ä¹ˆæ˜¯æ¡ä»¶æ¸²æŸ“ï¼Ÿ

åœ¨Webåº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¹æ®ä¸åŒçš„çŠ¶æ€æˆ–æ¡ä»¶æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºæŸäº›å…ƒç´ ã€‚ä¾‹å¦‚ï¼š

- æ ¹æ®ç”¨æˆ·æ˜¯å¦ç™»å½•æ˜¾ç¤ºä¸åŒçš„å¯¼èˆªèœå•
- æ ¹æ®æ•°æ®åŠ è½½çŠ¶æ€æ˜¾ç¤ºåŠ è½½ä¸­ã€æˆåŠŸæˆ–é”™è¯¯æç¤º
- æ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤ºæˆ–éšè—æŸäº›åŠŸèƒ½æŒ‰é’®
- æ ¹æ®è¡¨å•éªŒè¯ç»“æœæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

ä¼ ç»Ÿçš„JavaScriptæ–¹å¼éœ€è¦æ‰‹åŠ¨æ“ä½œDOMæ¥å®ç°è¿™äº›åŠŸèƒ½ï¼Œä»£ç ç¹çä¸”å®¹æ˜“å‡ºé”™ï¼š

```javascript
// ä¼ ç»ŸDOMæ“ä½œ
if (isLoggedIn) {
  document.getElementById('userMenu').style.display = 'block';
  document.getElementById('loginButton').style.display = 'none';
} else {
  document.getElementById('userMenu').style.display = 'none';
  document.getElementById('loginButton').style.display = 'block';
}
```

Vueæä¾›äº†å£°æ˜å¼çš„æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼Œä½¿è¿™äº›æ“ä½œå˜å¾—ç®€å•è€Œç›´è§‚ï¼š

```vue
<div id="userMenu" v-if="isLoggedIn">ç”¨æˆ·èœå•</div>
<button id="loginButton" v-if="!isLoggedIn">ç™»å½•</button>
```

## v-if æŒ‡ä»¤

`v-if` æ˜¯æœ€å¸¸ç”¨çš„æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼Œå®ƒæ ¹æ®è¡¨è¾¾å¼çš„çœŸå‡å€¼æ¥å†³å®šæ˜¯å¦æ¸²æŸ“å…ƒç´ ï¼š

```vue
<template>
  <div>
    <h2 v-if="isVisible">è¿™æ®µå†…å®¹ä¼šæ ¹æ®æ¡ä»¶æ˜¾ç¤ºæˆ–éšè—</h2>
    <button @click="toggleVisibility">åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€</button>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const isVisible = ref(true);

function toggleVisibility() {
  isVisible.value = !isVisible.value;
}
</script>
```

### v-if çš„å·¥ä½œåŸç†

å½“ `v-if` çš„æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œå…ƒç´ ä¼šè¢«æ¸²æŸ“åˆ°DOMä¸­ï¼›å½“æ¡ä»¶ä¸ºå‡æ—¶ï¼Œå…ƒç´ ä¼šè¢«å®Œå…¨ç§»é™¤å‡ºDOMã€‚è¿™æ„å‘³ç€ï¼š

1. å…ƒç´ åŠå…¶æ‰€æœ‰å­å…ƒç´ ä¼šè¢«é”€æ¯å’Œé‡å»º
2. å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤å’Œé‡æ–°æ·»åŠ 
3. ç»„ä»¶å®ä¾‹ä¼šè¢«é”€æ¯å’Œé‡æ–°åˆ›å»º

è¿™ç§"çœŸå®çš„"æ¡ä»¶æ¸²æŸ“ç¡®ä¿äº†å½“æ¡ä»¶ä¸ºå‡æ—¶ï¼Œä¸ä¼šæœ‰ä¸å¿…è¦çš„å…ƒç´ å­˜åœ¨äºDOMä¸­ï¼Œæœ‰åŠ©äºå‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ã€‚

### åœ¨ `<template>` å…ƒç´ ä¸Šä½¿ç”¨ v-if

å¦‚æœéœ€è¦åˆ‡æ¢å¤šä¸ªå…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œä½†ä¸æƒ³å¼•å…¥é¢å¤–çš„åŒ…è£…å…ƒç´ ï¼Œå¯ä»¥åœ¨ `<template>` å…ƒç´ ä¸Šä½¿ç”¨ `v-if`ï¼š

```vue
<template>
  <div>
    <template v-if="showUserInfo">
      <h3>ç”¨æˆ·ä¿¡æ¯</h3>
      <p>å§“å: {{ user.name }}</p>
      <p>é‚®ç®±: {{ user.email }}</p>
      <p>è§’è‰²: {{ user.role }}</p>
    </template>
    <button @click="showUserInfo = !showUserInfo">
      {{ showUserInfo ? 'éšè—' : 'æ˜¾ç¤º' }}ç”¨æˆ·ä¿¡æ¯
    </button>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const showUserInfo = ref(true);
const user = {
  name: 'å¼ ä¸‰',
  email: 'zhangsan@example.com',
  role: 'ç®¡ç†å‘˜'
};
</script>
```

`<template>` å…ƒç´ æ˜¯ä¸€ä¸ªä¸å¯è§çš„åŒ…è£…å…ƒç´ ï¼Œå®ƒä¸ä¼šè¢«æ¸²æŸ“åˆ°æœ€ç»ˆçš„HTMLä¸­ï¼Œåªä½œä¸ºåŒ…å«å…¶ä»–å…ƒç´ çš„å®¹å™¨ã€‚

## v-else æŒ‡ä»¤

`v-else` æŒ‡ä»¤ç”¨äºæä¾› `v-if` çš„"else å—"ï¼Œå®ƒå¿…é¡»ç´§è·Ÿåœ¨ `v-if` æˆ– `v-else-if` å…ƒç´ ä¹‹åï¼š

```vue
<template>
  <div>
    <div v-if="isLoggedIn">
      <h2>æ¬¢è¿å›æ¥ï¼Œ{{ username }}</h2>
      <button @click="logout">é€€å‡ºç™»å½•</button>
    </div>
    <div v-else>
      <h2>è¯·ç™»å½•</h2>
      <button @click="login">ç™»å½•</button>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const isLoggedIn = ref(false);
const username = ref('å¼ ä¸‰');

function login() {
  isLoggedIn.value = true;
}

function logout() {
  isLoggedIn.value = false;
}
</script>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ `isLoggedIn` ä¸ºçœŸæ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯å’Œé€€å‡ºæŒ‰é’®ï¼Œå¦åˆ™æ˜¾ç¤ºç™»å½•æç¤ºå’Œç™»å½•æŒ‰é’®ã€‚

## v-else-if æŒ‡ä»¤

`v-else-if` æŒ‡ä»¤ç”¨äºæä¾› `v-if` çš„"else if å—"ï¼Œå¯ä»¥é“¾å¼ä½¿ç”¨å¤šä¸ªæ¡ä»¶ï¼š

```vue
<template>
  <div>
    <div v-if="status === 'loading'">
      <p>æ•°æ®åŠ è½½ä¸­...</p>
      <div class="loading-spinner"></div>
    </div>
    <div v-else-if="status === 'success'">
      <h3>æ•°æ®åŠ è½½æˆåŠŸ</h3>
      <div class="data-container">
        <!-- æ•°æ®å†…å®¹ -->
      </div>
    </div>
    <div v-else-if="status === 'error'">
      <h3>åŠ è½½å¤±è´¥</h3>
      <p>é”™è¯¯ä¿¡æ¯: {{ errorMessage }}</p>
      <button @click="retryLoading">é‡è¯•</button>
    </div>
    <div v-else>
      <p>æœªçŸ¥çŠ¶æ€</p>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const status = ref('loading');
const errorMessage = ref('');

// æ¨¡æ‹Ÿæ•°æ®åŠ è½½
setTimeout(() => {
  // éšæœºæ¨¡æ‹ŸæˆåŠŸæˆ–å¤±è´¥
  if (Math.random() > 0.3) {
    status.value = 'success';
  } else {
    status.value = 'error';
    errorMessage.value = 'ç½‘ç»œè¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•';
  }
}, 2000);

function retryLoading() {
  status.value = 'loading';
  // é‡æ–°åŠ è½½æ•°æ®...
  setTimeout(() => {
    status.value = 'success';
  }, 2000);
}
</script>

<style scoped>
.loading-spinner {
  width: 30px;
  height: 30px;
  border: 3px solid #f3f3f3;
  border-top: 3px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.data-container {
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 4px;
  min-height: 100px;
}
</style>
```

è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•æ ¹æ®æ•°æ®åŠ è½½çŠ¶æ€ï¼ˆloadingã€successã€errorï¼‰æ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚

## v-show æŒ‡ä»¤

`v-show` æ˜¯å¦ä¸€ä¸ªç”¨äºæ¡ä»¶æ˜¾ç¤ºå…ƒç´ çš„æŒ‡ä»¤ï¼Œç”¨æ³•ç±»ä¼¼äº `v-if`ï¼š

```vue
<template>
  <div>
    <h2 v-show="isVisible">è¿™æ®µå†…å®¹ä¼šæ ¹æ®æ¡ä»¶æ˜¾ç¤ºæˆ–éšè—</h2>
    <button @click="toggleVisibility">åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€</button>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const isVisible = ref(true);

function toggleVisibility() {
  isVisible.value = !isVisible.value;
}
</script>
```

### v-show çš„å·¥ä½œåŸç†

ä¸ `v-if` ä¸åŒï¼Œ`v-show` åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS `display` å±æ€§ï¼š

1. å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œå…ƒç´ ä¼šè¢«æ˜¾ç¤ºï¼ˆ`display` ä¸ºå…¶åŸå§‹å€¼ï¼‰
2. å½“æ¡ä»¶ä¸ºå‡æ—¶ï¼Œå…ƒç´ ä¼šè¢«éšè—ï¼ˆ`display: none`ï¼‰
3. å…ƒç´ å§‹ç»ˆå­˜åœ¨äºDOMä¸­ï¼Œåªæ˜¯è§†è§‰ä¸Šçš„æ˜¾ç¤ºå’Œéšè—

è¿™æ„å‘³ç€ä½¿ç”¨ `v-show` çš„å…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨DOMä¸­ï¼Œåªæ˜¯æ ¹æ®æ¡ä»¶åˆ‡æ¢å…¶å¯è§æ€§ã€‚

### v-show ä¸æ”¯æŒ `<template>` å…ƒç´ 

ä¸ `v-if` ä¸åŒï¼Œ`v-show` ä¸èƒ½ç”¨åœ¨ `<template>` å…ƒç´ ä¸Šï¼Œä¹Ÿä¸æ”¯æŒ `v-else` æˆ– `v-else-if`ã€‚

## v-if vs v-showï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ

`v-if` å’Œ `v-show` éƒ½å¯ä»¥ç”¨æ¥æ¡ä»¶æ€§åœ°æ˜¾ç¤ºå…ƒç´ ï¼Œä½†å®ƒä»¬æœ‰é‡è¦çš„åŒºåˆ«ï¼š

| ç‰¹æ€§ | v-if | v-show |
|------|------|--------|
| æ¸²æŸ“æ–¹å¼ | æ¡ä»¶ä¸ºå‡æ—¶ï¼Œå…ƒç´ å®Œå…¨ä¸æ¸²æŸ“ï¼ˆä¸åœ¨DOMä¸­ï¼‰ | æ¡ä»¶ä¸ºå‡æ—¶ï¼Œå…ƒç´ ä»ç„¶æ¸²æŸ“ï¼Œä½†è®¾ç½®ä¸º `display: none` |
| åˆ‡æ¢å¼€é”€ | è¾ƒé«˜ï¼ˆé”€æ¯/é‡å»ºDOMã€ç»„ä»¶ã€äº‹ä»¶ç›‘å¬å™¨ç­‰ï¼‰ | è¾ƒä½ï¼ˆåªåˆ‡æ¢CSSå±æ€§ï¼‰ |
| åˆå§‹æ¸²æŸ“å¼€é”€ | æ¡ä»¶ä¸ºå‡æ—¶æ²¡æœ‰å¼€é”€ | æ— è®ºæ¡ä»¶çœŸå‡éƒ½ä¼šæ¸²æŸ“ |
| æ”¯æŒ `<template>` | æ”¯æŒ | ä¸æ”¯æŒ |
| æ”¯æŒ v-else/v-else-if | æ”¯æŒ | ä¸æ”¯æŒ |

### é€‰æ‹©å»ºè®®

- **ä½¿ç”¨ v-if çš„åœºæ™¯**ï¼š
  - æ¡ä»¶å¾ˆå°‘æ”¹å˜çš„æƒ…å†µï¼ˆå¦‚ç”¨æˆ·æƒé™ã€è®¾å¤‡ç±»å‹ç­‰ï¼‰
  - åˆå§‹æ¡ä»¶ä¸ºå‡ï¼Œä¸”å¯èƒ½é•¿æ—¶é—´ä¿æŒä¸ºå‡çš„æƒ…å†µ
  - éœ€è¦æ¡ä»¶æ€§åœ°æ¸²æŸ“å¤§é‡å†…å®¹æˆ–é‡ç»„ä»¶æ—¶
  - éœ€è¦ä¸ v-else æˆ– v-else-if ç»“åˆä½¿ç”¨æ—¶

- **ä½¿ç”¨ v-show çš„åœºæ™¯**ï¼š
  - éœ€è¦é¢‘ç¹åˆ‡æ¢çš„æƒ…å†µï¼ˆå¦‚å¯¹è¯æ¡†ã€æ ‡ç­¾é¡µã€æŠ˜å é¢æ¿ç­‰ï¼‰
  - åˆå§‹æ¸²æŸ“å¼€é”€ä¸æ˜¯ä¸»è¦è€ƒè™‘å› ç´ 
  - å†…å®¹ç®€å•ä¸”åˆ‡æ¢é¢‘ç‡é«˜çš„æƒ…å†µ

```vue
<!-- é€‚åˆv-ifï¼šç”¨æˆ·æƒé™æ§åˆ¶ï¼Œå¾ˆå°‘å˜åŒ– -->
<admin-panel v-if="user.isAdmin"></admin-panel>

<!-- é€‚åˆv-showï¼šé¢‘ç¹åˆ‡æ¢çš„å¯¹è¯æ¡† -->
<dialog-box v-show="isDialogVisible"></dialog-box>
```

## æ¡ä»¶æ¸²æŸ“çš„å®é™…åº”ç”¨

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…åº”ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºæ¡ä»¶æ¸²æŸ“åœ¨ä¸åŒåœºæ™¯ä¸‹çš„ä½¿ç”¨æ–¹æ³•ã€‚

### ç¤ºä¾‹1ï¼šå¤šçº§èœå•æƒé™æ§åˆ¶

```vue
<template>
  <div class="app-container">
    <header>
      <h1>ç®¡ç†ç³»ç»Ÿ</h1>
      <div class="user-info" v-if="isLoggedIn">
        <span>æ¬¢è¿ï¼Œ{{ user.name }}</span>
        <button @click="logout">é€€å‡º</button>
      </div>
      <button v-else @click="showLoginForm = true">ç™»å½•</button>
    </header>
    
    <nav class="sidebar">
      <ul class="menu">
        <li>
          <a href="#dashboard">
            <i class="icon-dashboard"></i>
            <span>ä»ªè¡¨ç›˜</span>
          </a>
        </li>
        
        <!-- æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜éƒ½å¯è§ -->
        <li>
          <a href="#profile">
            <i class="icon-user"></i>
            <span>ä¸ªäººèµ„æ–™</span>
          </a>
        </li>
        
        <!-- åªæœ‰ç®¡ç†å‘˜å¯è§çš„èœå• -->
        <template v-if="user.role === 'admin'">
          <li>
            <a href="#users">
              <i class="icon-users"></i>
              <span>ç”¨æˆ·ç®¡ç†</span>
            </a>
          </li>
          
          <li>
            <a href="#settings">
              <i class="icon-settings"></i>
              <span>ç³»ç»Ÿè®¾ç½®</span>
            </a>
          </li>
        </template>
        
        <!-- ç‰¹å®šæƒé™å¯è§ -->
        <li v-if="hasPermission('content_manage')">
          <a href="#content">
            <i class="icon-content"></i>
            <span>å†…å®¹ç®¡ç†</span>
          </a>
        </li>
        
        <li v-if="hasPermission('reports_view')">
          <a href="#reports">
            <i class="icon-chart"></i>
            <span>æ•°æ®æŠ¥è¡¨</span>
          </a>
        </li>
      </ul>
    </nav>
    
    <main class="content">
      <!-- ç™»å½•è¡¨å• -->
      <div class="login-form" v-if="showLoginForm && !isLoggedIn">
        <h2>ç”¨æˆ·ç™»å½•</h2>
        <form @submit.prevent="login">
          <div class="form-group">
            <label for="username">ç”¨æˆ·å</label>
            <input id="username" v-model="loginForm.username" required />
          </div>
          
          <div class="form-group">
            <label for="password">å¯†ç </label>
            <input id="password" type="password" v-model="loginForm.password" required />
          </div>
          
          <div class="form-group">
            <label>
              <input type="checkbox" v-model="loginForm.remember" />
              è®°ä½æˆ‘
            </label>
          </div>
          
          <div v-if="loginError" class="error-message">
            {{ loginError }}
          </div>
          
          <button type="submit" :disabled="isLoggingIn">
            {{ isLoggingIn ? 'ç™»å½•ä¸­...' : 'ç™»å½•' }}
          </button>
        </form>
      </div>
      
      <!-- ä¸»å†…å®¹åŒº -->
      <div v-else-if="isLoggedIn">
        <h2>æ¬¢è¿ä½¿ç”¨ç®¡ç†ç³»ç»Ÿ</h2>
        <p>æ‚¨å¯ä»¥åœ¨å·¦ä¾§èœå•é€‰æ‹©åŠŸèƒ½ã€‚</p>
        
        <!-- æ ¹æ®ç”¨æˆ·è§’è‰²æ˜¾ç¤ºä¸åŒå†…å®¹ -->
        <div v-if="user.role === 'admin'" class="admin-dashboard">
          <h3>ç®¡ç†å‘˜å¿«æ·æ“ä½œ</h3>
          <div class="quick-actions">
            <button>æ·»åŠ ç”¨æˆ·</button>
            <button>ç³»ç»Ÿé…ç½®</button>
            <button>æŸ¥çœ‹æ—¥å¿—</button>
          </div>
        </div>
        
        <div v-else class="user-dashboard">
          <h3>å¸¸ç”¨åŠŸèƒ½</h3>
          <div class="quick-actions">
            <button>ç¼–è¾‘èµ„æ–™</button>
            <button>æˆ‘çš„æ¶ˆæ¯</button>
          </div>
        </div>
      </div>
      
      <!-- æœªç™»å½•ä¸”æœªæ˜¾ç¤ºç™»å½•è¡¨å• -->
      <div v-else class="welcome-screen">
        <h2>æ¬¢è¿è®¿é—®ç®¡ç†ç³»ç»Ÿ</h2>
        <p>è¯·ç‚¹å‡»å³ä¸Šè§’çš„"ç™»å½•"æŒ‰é’®è¿›å…¥ç³»ç»Ÿã€‚</p>
      </div>
    </main>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue';

// ç”¨æˆ·ç™»å½•çŠ¶æ€
const isLoggedIn = ref(false);
const isLoggingIn = ref(false);
const loginError = ref('');
const showLoginForm = ref(false);

// ç”¨æˆ·ä¿¡æ¯
const user = reactive({
  name: '',
  role: '',
  permissions: []
});

// ç™»å½•è¡¨å•
const loginForm = reactive({
  username: '',
  password: '',
  remember: false
});

// ç™»å½•æ–¹æ³•
function login() {
  isLoggingIn.value = true;
  loginError.value = '';
  
  // æ¨¡æ‹ŸAPIè¯·æ±‚
  setTimeout(() => {
    isLoggingIn.value = false;
    
    // ç®€å•çš„ç”¨æˆ·åå¯†ç éªŒè¯
    if (loginForm.username === 'admin' && loginForm.password === 'admin123') {
      isLoggedIn.value = true;
      showLoginForm.value = false;
      
      // è®¾ç½®ç”¨æˆ·ä¿¡æ¯
      user.name = 'Admin User';
      user.role = 'admin';
      user.permissions = ['content_manage', 'reports_view', 'user_manage'];
      
    } else if (loginForm.username === 'user' && loginForm.password === 'user123') {
      isLoggedIn.value = true;
      showLoginForm.value = false;
      
      // è®¾ç½®ç”¨æˆ·ä¿¡æ¯
      user.name = 'Normal User';
      user.role = 'user';
      user.permissions = ['content_manage'];
      
    } else {
      loginError.value = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
    }
  }, 1000);
}

// é€€å‡ºç™»å½•
function logout() {
  isLoggedIn.value = false;
  user.name = '';
  user.role = '';
  user.permissions = [];
}

// æ£€æŸ¥æƒé™
function hasPermission(permission) {
  return user.permissions.includes(permission);
}
</script>

<style scoped>
.app-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  background-color: #333;
  color: white;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.sidebar {
  width: 250px;
  background-color: #f5f5f5;
  padding: 1rem 0;
  position: fixed;
  left: 0;
  top: 60px;
  bottom: 0;
}

.menu {
  list-style: none;
  padding: 0;
  margin: 0;
}

.menu li a {
  display: flex;
  align-items: center;
  padding: 0.75rem 1.5rem;
  color: #333;
  text-decoration: none;
}

.menu li a:hover {
  background-color: #e0e0e0;
}

.menu li a i {
  margin-right: 0.5rem;
}

.content {
  margin-left: 250px;
  padding: 2rem;
  flex: 1;
}

.login-form {
  max-width: 400px;
  margin: 0 auto;
  padding: 2rem;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.form-group {
  margin-bottom: 1rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
}

.form-group input[type="text"],
.form-group input[type="password"] {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.error-message {
  color: red;
  margin: 1rem 0;
}

button {
  padding: 0.5rem 1rem;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #45a049;
}

button:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

.quick-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
}
</style>
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ¥å®ç°åŸºäºç”¨æˆ·è§’è‰²å’Œæƒé™çš„èœå•æ§åˆ¶å’Œå†…å®¹æ˜¾ç¤ºã€‚å®ƒåŒ…æ‹¬ï¼š

1. æ ¹æ®ç™»å½•çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„å¤´éƒ¨å†…å®¹
2. æ ¹æ®ç”¨æˆ·è§’è‰²æ˜¾ç¤ºä¸åŒçš„èœå•é¡¹
3. æ ¹æ®ç‰¹å®šæƒé™æ˜¾ç¤ºç‰¹å®šåŠŸèƒ½
4. æ ¹æ®çŠ¶æ€åˆ‡æ¢ç™»å½•è¡¨å•å’Œä¸»å†…å®¹åŒº

### ç¤ºä¾‹2ï¼šå¤šæ­¥éª¤è¡¨å•

```vue
<template>
  <div class="multi-step-form">
    <h2>å¤šæ­¥éª¤æ³¨å†Œè¡¨å•</h2>
    
    <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
    <div class="steps-indicator">
      <div 
        v-for="(step, index) in steps" 
        :key="index"
        class="step"
        :class="{ 
          'active': currentStep === index,
          'completed': currentStep > index 
        }"
      >
        <div class="step-number">{{ index + 1 }}</div>
        <div class="step-title">{{ step.title }}</div>
      </div>
    </div>
    
    <!-- è¡¨å•å†…å®¹ -->
    <div class="form-content">
      <!-- æ­¥éª¤1ï¼šåŸºæœ¬ä¿¡æ¯ -->
      <div v-if="currentStep === 0" class="step-content">
        <h3>{{ steps[0].title }}</h3>
        
        <div class="form-group">
          <label for="username">ç”¨æˆ·å</label>
          <input 
            id="username" 
            v-model="formData.username"
            :class="{ 'is-invalid': errors.username }"
          />
          <div v-if="errors.username" class="error-message">
            {{ errors.username }}
          </div>
        </div>
        
        <div class="form-group">
          <label for="email">é‚®ç®±</label>
          <input 
            id="email" 
            type="email" 
            v-model="formData.email"
            :class="{ 'is-invalid': errors.email }"
          />
          <div v-if="errors.email" class="error-message">
            {{ errors.email }}
          </div>
        </div>
        
        <div class="form-group">
          <label for="password">å¯†ç </label>
          <input 
            id="password" 
            type="password" 
            v-model="formData.password"
            :class="{ 'is-invalid': errors.password }"
          />
          <div v-if="errors.password" class="error-message">
            {{ errors.password }}
          </div>
        </div>
      </div>
      
      <!-- æ­¥éª¤2ï¼šä¸ªäººèµ„æ–™ -->
      <div v-else-if="currentStep === 1" class="step-content">
        <h3>{{ steps[1].title }}</h3>
        
        <div class="form-group">
          <label for="fullName">å§“å</label>
          <input 
            id="fullName" 
            v-model="formData.fullName"
            :class="{ 'is-invalid': errors.fullName }"
          />
          <div v-if="errors.fullName" class="error-message">
            {{ errors.fullName }}
          </div>
        </div>
        
        <div class="form-group">
          <label for="phone">æ‰‹æœºå·ç </label>
          <input 
            id="phone" 
            v-model="formData.phone"
            :class="{ 'is-invalid': errors.phone }"
          />
          <div v-if="errors.phone" class="error-message">
            {{ errors.phone }}
          </div>
        </div>
        
        <div class="form-group">
          <label>æ€§åˆ«</label>
          <div class="radio-group">
            <label>
              <input type="radio" v-model="formData.gender" value="male" />
              ç”·
            </label>
            <label>
              <input type="radio" v-model="formData.gender" value="female" />
              å¥³
            </label>
          </div>
        </div>
      </div>
      
      <!-- æ­¥éª¤3ï¼šå…´è¶£çˆ±å¥½ -->
      <div v-else-if="currentStep === 2" class="step-content">
        <h3>{{ steps[2].title }}</h3>
        
        <div class="form-group">
          <label>é€‰æ‹©æ‚¨æ„Ÿå…´è¶£çš„é¢†åŸŸï¼ˆå¯å¤šé€‰ï¼‰</label>
          <div class="checkbox-group">
            <label v-for="(interest, index) in interests" :key="index">
              <input 
                type="checkbox" 
                :value="interest.value" 
                v-model="formData.interests"
              />
              {{ interest.label }}
            </label>
          </div>
          <div v-if="errors.interests" class="error-message">
            {{ errors.interests }}
          </div>
        </div>
        
        <div class="form-group">
          <label for="bio">ä¸ªäººç®€ä»‹</label>
          <textarea 
            id="bio" 
            v-model="formData.bio"
            rows="4"
          ></textarea>
        </div>
      </div>
      
      <!-- æ­¥éª¤4ï¼šç¡®è®¤ä¿¡æ¯ -->
      <div v-else-if="currentStep === 3" class="step-content">
        <h3>{{ steps[3].title }}</h3>
        
        <div class="summary">
          <h4>åŸºæœ¬ä¿¡æ¯</h4>
          <p><strong>ç”¨æˆ·åï¼š</strong>{{ formData.username }}</p>
          <p><strong>é‚®ç®±ï¼š</strong>{{ formData.email }}</p>
          
          <h4>ä¸ªäººèµ„æ–™</h4>
          <p><strong>å§“åï¼š</strong>{{ formData.fullName }}</p>
          <p><strong>æ‰‹æœºå·ç ï¼š</strong>{{ formData.phone }}</p>
          <p><strong>æ€§åˆ«ï¼š</strong>{{ formData.gender === 'male' ? 'ç”·' : 'å¥³' }}</p>
          
          <h4>å…´è¶£çˆ±å¥½</h4>
          <p><strong>å…´è¶£é¢†åŸŸï¼š</strong>
            <span v-if="formData.interests.length">
              {{ getInterestLabels(formData.interests).join(', ') }}
            </span>
            <span v-else>æœªé€‰æ‹©</span>
          </p>
          <p><strong>ä¸ªäººç®€ä»‹ï¼š</strong>{{ formData.bio || 'æœªå¡«å†™' }}</p>
        </div>
        
        <div class="agreement">
          <label>
            <input type="checkbox" v-model="formData.agreement" />
            æˆ‘å·²é˜…è¯»å¹¶åŒæ„<a href="#">ç”¨æˆ·åè®®</a>å’Œ<a href="#">éšç§æ”¿ç­–</a>
          </label>
          <div v-if="errors.agreement" class="error-message">
            {{ errors.agreement }}
          </div>
        </div>
      </div>
      
      <!-- å®Œæˆé¡µé¢ -->
      <div v-else-if="currentStep === 4" class="step-content completion">
        <div class="success-icon">âœ“</div>
        <h3>æ³¨å†ŒæˆåŠŸï¼</h3>
        <p>æ„Ÿè°¢æ‚¨å®Œæˆæ³¨å†Œï¼Œæ‚¨çš„è´¦å·å·²ç»åˆ›å»ºæˆåŠŸã€‚</p>
        <p>æˆ‘ä»¬å·²å‘æ‚¨çš„é‚®ç®± {{ formData.email }} å‘é€äº†ä¸€å°éªŒè¯é‚®ä»¶ï¼Œè¯·æŸ¥æ”¶å¹¶å®Œæˆé‚®ç®±éªŒè¯ã€‚</p>
        <button @click="goToLogin" class="primary-button">
          å‰å¾€ç™»å½•
        </button>
      </div>
    </div>
    
    <!-- è¡¨å•æŒ‰é’® -->
    <div v-if="currentStep < 4" class="form-buttons">
      <button 
        v-if="currentStep > 0" 
        @click="prevStep"
        class="secondary-button"
      >
        ä¸Šä¸€æ­¥
      </button>
      
      <button 
        v-if="currentStep < 3" 
        @click="nextStep"
        class="primary-button"
      >
        ä¸‹ä¸€æ­¥
      </button>
      
      <button 
        v-else-if="currentStep === 3" 
        @click="submitForm"
        class="primary-button"
        :disabled="isSubmitting"
      >
        {{ isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤' }}
      </button>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue';

// æ­¥éª¤å®šä¹‰
const steps = [
  { title: 'åŸºæœ¬ä¿¡æ¯' },
  { title: 'ä¸ªäººèµ„æ–™' },
  { title: 'å…´è¶£çˆ±å¥½' },
  { title: 'ç¡®è®¤ä¿¡æ¯' }
];

// å…´è¶£é€‰é¡¹
const interests = [
  { label: 'æŠ€æœ¯', value: 'technology' },
  { label: 'è‰ºæœ¯', value: 'art' },
  { label: 'ä½“è‚²', value: 'sports' },
  { label: 'éŸ³ä¹', value: 'music' },
  { label: 'é˜…è¯»', value: 'reading' },
  { label: 'æ—…è¡Œ', value: 'travel' },
  { label: 'ç¾é£Ÿ', value: 'food' },
  { label: 'ç”µå½±', value: 'movies' }
];

// è¡¨å•æ•°æ®
const formData = reactive({
  username: '',
  email: '',
  password: '',
  fullName: '',
  phone: '',
  gender: 'male',
  interests: [],
  bio: '',
  agreement: false
});

// é”™è¯¯ä¿¡æ¯
const errors = reactive({
  username: '',
  email: '',
  password: '',
  fullName: '',
  phone: '',æˆ‘å°†ç»§ç»­ç¼–å†™Vueæ¡ä»¶æ¸²æŸ“çš„æ–‡æ¡£å†…å®¹ã€‚

```markdown:c:\project\kphub\src\frontend\vue\02-åŸºç¡€\2.5-æ¡ä»¶æ¸²æŸ“.md
  interests: [],
  bio: '',
  agreement: false
});

// é”™è¯¯ä¿¡æ¯
const errors = reactive({
  username: '',
  email: '',
  password: '',
  fullName: '',
  phone: '',
  interests: '',
  agreement: ''
});

// å½“å‰æ­¥éª¤
const currentStep = ref(0);
const isSubmitting = ref(false);

// è·å–å…´è¶£æ ‡ç­¾
function getInterestLabels(values) {
  return interests
    .filter(interest => values.includes(interest.value))
    .map(interest => interest.label);
}

// éªŒè¯å½“å‰æ­¥éª¤
function validateCurrentStep() {
  let isValid = true;
  
  // æ¸…é™¤å½“å‰æ­¥éª¤çš„é”™è¯¯ä¿¡æ¯
  if (currentStep.value === 0) {
    errors.username = '';
    errors.email = '';
    errors.password = '';
    
    // éªŒè¯ç”¨æˆ·å
    if (!formData.username) {
      errors.username = 'è¯·è¾“å…¥ç”¨æˆ·å';
      isValid = false;
    } else if (formData.username.length < 3) {
      errors.username = 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦';
      isValid = false;
    }
    
    // éªŒè¯é‚®ç®±
    if (!formData.email) {
      errors.email = 'è¯·è¾“å…¥é‚®ç®±';
      isValid = false;
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      errors.email = 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€';
      isValid = false;
    }
    
    // éªŒè¯å¯†ç 
    if (!formData.password) {
      errors.password = 'è¯·è¾“å…¥å¯†ç ';
      isValid = false;
    } else if (formData.password.length < 6) {
      errors.password = 'å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦';
      isValid = false;
    }
  } 
  else if (currentStep.value === 1) {
    errors.fullName = '';
    errors.phone = '';
    
    // éªŒè¯å§“å
    if (!formData.fullName) {
      errors.fullName = 'è¯·è¾“å…¥å§“å';
      isValid = false;
    }
    
    // éªŒè¯æ‰‹æœºå·ç 
    if (!formData.phone) {
      errors.phone = 'è¯·è¾“å…¥æ‰‹æœºå·ç ';
      isValid = false;
    } else if (!/^\d{11}$/.test(formData.phone)) {
      errors.phone = 'è¯·è¾“å…¥æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç ';
      isValid = false;
    }
  }
  else if (currentStep.value === 2) {
    errors.interests = '';
    
    // éªŒè¯å…´è¶£çˆ±å¥½ï¼ˆå¯é€‰ï¼‰
    if (formData.interests.length === 0) {
      // è¿™é‡Œæˆ‘ä»¬ä¸å°†å…¶è§†ä¸ºé”™è¯¯ï¼Œåªæ˜¯æç¤º
      // errors.interests = 'è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªå…´è¶£é¢†åŸŸ';
      // isValid = false;
    }
  }
  else if (currentStep.value === 3) {
    errors.agreement = '';
    
    // éªŒè¯åè®®åŒæ„
    if (!formData.agreement) {
      errors.agreement = 'è¯·é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–';
      isValid = false;
    }
  }
  
  return isValid;
}

// ä¸‹ä¸€æ­¥
function nextStep() {
  if (validateCurrentStep()) {
    currentStep.value++;
  }
}

// ä¸Šä¸€æ­¥
function prevStep() {
  if (currentStep.value > 0) {
    currentStep.value--;
  }
}

// æäº¤è¡¨å•
function submitForm() {
  if (validateCurrentStep()) {
    isSubmitting.value = true;
    
    // æ¨¡æ‹ŸAPIè¯·æ±‚
    setTimeout(() => {
      isSubmitting.value = false;
      currentStep.value = 4; // æ˜¾ç¤ºå®Œæˆé¡µé¢
    }, 1500);
  }
}

// å‰å¾€ç™»å½•
function goToLogin() {
  alert('è·³è½¬åˆ°ç™»å½•é¡µé¢');
}
</script>

<style scoped>
.multi-step-form {
  max-width: 600px;
  margin: 0 auto;
  padding: 2rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  background-color: #fff;
}

.steps-indicator {
  display: flex;
  margin-bottom: 2rem;
}

.step {
  flex: 1;
  text-align: center;
  position: relative;
}

.step:not(:last-child)::after {
  content: '';
  position: absolute;
  top: 20px;
  left: 50%;
  width: 100%;
  height: 2px;
  background-color: #ddd;
}

.step.active .step-number,
.step.completed .step-number {
  background-color: #4CAF50;
  color: white;
}

.step.completed:not(:last-child)::after {
  background-color: #4CAF50;
}

.step-number {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: #ddd;
  color: #666;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 10px;
  position: relative;
  z-index: 1;
}

.step-title {
  font-size: 14px;
  color: #666;
}

.step.active .step-title {
  color: #333;
  font-weight: bold;
}

.form-content {
  margin-bottom: 2rem;
}

.step-content {
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: bold;
}

.form-group input[type="text"],
.form-group input[type="email"],
.form-group input[type="password"],
.form-group textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.form-group input.is-invalid,
.form-group textarea.is-invalid {
  border-color: #dc3545;
}

.error-message {
  color: #dc3545;
  font-size: 14px;
  margin-top: 0.5rem;
}

.radio-group,
.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-buttons {
  display: flex;
  justify-content: space-between;
}

.primary-button {
  padding: 0.75rem 1.5rem;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.primary-button:hover {
  background-color: #45a049;
}

.primary-button:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

.secondary-button {
  padding: 0.75rem 1.5rem;
  background-color: #f5f5f5;
  color: #333;
  border: 1px solid #ddd;
  border-radius: 4px;
  cursor: pointer;
}

.secondary-button:hover {
  background-color: #e0e0e0;
}

.summary {
  background-color: #f9f9f9;
  padding: 1.5rem;
  border-radius: 4px;
  margin-bottom: 1.5rem;
}

.summary h4 {
  margin-top: 1rem;
  margin-bottom: 0.5rem;
  border-bottom: 1px solid #ddd;
  padding-bottom: 0.5rem;
}

.summary h4:first-child {
  margin-top: 0;
}

.agreement {
  margin-top: 1.5rem;
}

.completion {
  text-align: center;
}

.success-icon {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background-color: #4CAF50;
  color: white;
  font-size: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem;
}
</style>
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ¥å®ç°å¤šæ­¥éª¤è¡¨å•ã€‚å®ƒä½¿ç”¨ `v-if` å’Œ `v-else-if` æ ¹æ®å½“å‰æ­¥éª¤æ˜¾ç¤ºä¸åŒçš„è¡¨å•å†…å®¹ï¼Œå¹¶åœ¨æœ€åæ˜¾ç¤ºå®Œæˆé¡µé¢ã€‚

### ç¤ºä¾‹3ï¼šæ•°æ®åŠ è½½çŠ¶æ€å¤„ç†

```vue
<template>
  <div class="data-loading-demo">
    <h2>äº§å“åˆ—è¡¨</h2>
    
    <!-- æœç´¢å’Œç­›é€‰ -->
    <div class="filters">
      <div class="search-box">
        <input 
          type="text" 
          v-model="searchQuery" 
          placeholder="æœç´¢äº§å“..." 
          @input="handleSearch"
        />
      </div>
      
      <div class="category-filter">
        <label>åˆ†ç±»ï¼š</label>
        <select v-model="selectedCategory" @change="handleFilter">
          <option value="">å…¨éƒ¨</option>
          <option 
            v-for="category in categories" 
            :key="category" 
            :value="category"
          >
            {{ category }}
          </option>
        </select>
      </div>
    </div>
    
    <!-- åŠ è½½çŠ¶æ€ -->
    <div v-if="loading" class="loading-state">
      <div class="spinner"></div>
      <p>åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...</p>
    </div>
    
    <!-- é”™è¯¯çŠ¶æ€ -->
    <div v-else-if="error" class="error-state">
      <div class="error-icon">!</div>
      <h3>åŠ è½½å¤±è´¥</h3>
      <p>{{ error }}</p>
      <button @click="fetchProducts">é‡è¯•</button>
    </div>
    
    <!-- ç©ºæ•°æ®çŠ¶æ€ -->
    <div v-else-if="filteredProducts.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ”</div>
      <h3>æœªæ‰¾åˆ°äº§å“</h3>
      <p v-if="searchQuery || selectedCategory">
        æ²¡æœ‰ç¬¦åˆå½“å‰ç­›é€‰æ¡ä»¶çš„äº§å“ã€‚
        <a href="#" @click.prevent="resetFilters">æ¸…é™¤ç­›é€‰æ¡ä»¶</a>
      </p>
      <p v-else>äº§å“åˆ—è¡¨ä¸ºç©ºã€‚</p>
    </div>
    
    <!-- æ•°æ®å±•ç¤º -->
    <div v-else class="product-grid">
      <div 
        v-for="product in filteredProducts" 
        :key="product.id"
        class="product-card"
      >
        <div class="product-image">
          <img :src="product.image" :alt="product.name" />
          <span 
            v-if="product.stock <= 0" 
            class="out-of-stock-badge"
          >
            ç¼ºè´§
          </span>
          <span 
            v-else-if="product.stock < 10" 
            class="low-stock-badge"
          >
            åº“å­˜ç´§å¼ 
          </span>
        </div>
        
        <div class="product-info">
          <h3>{{ product.name }}</h3>
          <p class="product-category">{{ product.category }}</p>
          <p class="product-description">{{ product.description }}</p>
          
          <div class="product-price">
            <span class="current-price">Â¥{{ product.price.toFixed(2) }}</span>
            <span 
              v-if="product.originalPrice && product.originalPrice > product.price" 
              class="original-price"
            >
              Â¥{{ product.originalPrice.toFixed(2) }}
            </span>
          </div>
          
          <button 
            class="add-to-cart-button"
            :disabled="product.stock <= 0"
            @click="addToCart(product)"
          >
            {{ product.stock <= 0 ? 'ç¼ºè´§' : 'åŠ å…¥è´­ç‰©è½¦' }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- è´­ç‰©è½¦æç¤º -->
    <div 
      v-if="cartNotification.show" 
      class="cart-notification"
      :class="{ 'show': cartNotification.show }"
    >
      <div class="notification-content">
        <span>{{ cartNotification.message }}</span>
        <button @click="cartNotification.show = false">Ã—</button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue';

// çŠ¶æ€å˜é‡
const products = ref([]);
const loading = ref(true);
const error = ref(null);
const searchQuery = ref('');
const selectedCategory = ref('');
const categories = ref([]);
const cartNotification = ref({
  show: false,
  message: ''
});

// è®¡ç®—è¿‡æ»¤åçš„äº§å“
const filteredProducts = computed(() => {
  return products.value.filter(product => {
    // æœç´¢è¿‡æ»¤
    const matchesSearch = searchQuery.value === '' || 
      product.name.toLowerCase().includes(searchQuery.value.toLowerCase()) ||
      product.description.toLowerCase().includes(searchQuery.value.toLowerCase());
    
    // åˆ†ç±»è¿‡æ»¤
    const matchesCategory = selectedCategory.value === '' || 
      product.category === selectedCategory.value;
    
    return matchesSearch && matchesCategory;
  });
});

// è·å–äº§å“æ•°æ®
function fetchProducts() {
  loading.value = true;
  error.value = null;
  
  // æ¨¡æ‹ŸAPIè¯·æ±‚
  setTimeout(() => {
    try {
      // æ¨¡æ‹Ÿæ•°æ®
      const data = [
        {
          id: 1,
          name: 'é«˜æ¸…æ™ºèƒ½ç”µè§†',
          category: 'ç”µå­äº§å“',
          description: '55è‹±å¯¸4Kè¶…é«˜æ¸…æ™ºèƒ½ç”µè§†ï¼Œæ”¯æŒè¯­éŸ³æ§åˆ¶',
          price: 3999,
          originalPrice: 4599,
          stock: 15,
          image: 'https://via.placeholder.com/300x200?text=TV'
        },
        {
          id: 2,
          name: 'æ— çº¿è“ç‰™è€³æœº',
          category: 'ç”µå­äº§å“',
          description: 'ä¸»åŠ¨é™å™ªï¼Œé•¿ç»­èˆªï¼Œèˆ’é€‚ä½©æˆ´',
          price: 899,
          originalPrice: 1299,
          stock: 8,
          image: 'https://via.placeholder.com/300x200?text=Headphones'
        },
        {
          id: 3,
          name: 'æœºæ¢°é”®ç›˜',
          category: 'ç”µè„‘é…ä»¶',
          description: '87é”®é’è½´æœºæ¢°é”®ç›˜ï¼ŒRGBèƒŒå…‰',
          price: 299,
          originalPrice: null,
          stock: 0,
          image: 'https://via.placeholder.com/300x200?text=Keyboard'
        },
        {
          id: 4,
          name: 'æ¸¸æˆé¼ æ ‡',
          category: 'ç”µè„‘é…ä»¶',
          description: 'é«˜ç²¾åº¦å…‰å­¦ä¼ æ„Ÿå™¨ï¼Œå¯ç¼–ç¨‹æŒ‰é”®',
          price: 199,
          originalPrice: 249,
          stock: 20,
          image: 'https://via.placeholder.com/300x200?text=Mouse'
        },
        {
          id: 5,
          name: 'æ™ºèƒ½æ‰‹è¡¨',
          category: 'ç©¿æˆ´è®¾å¤‡',
          description: 'å¿ƒç‡ç›‘æµ‹ï¼Œç¡çœ åˆ†æï¼Œè¿åŠ¨è¿½è¸ª',
          price: 1299,
          originalPrice: 1499,
          stock: 5,
          image: 'https://via.placeholder.com/300x200?text=Watch'
        },
        {
          id: 6,
          name: 'å¥èº«æ‰‹ç¯',
          category: 'ç©¿æˆ´è®¾å¤‡',
          description: 'é˜²æ°´è®¾è®¡ï¼Œé•¿ç»­èˆªï¼Œå¤šç§è¿åŠ¨æ¨¡å¼',
          price: 199,
          originalPrice: 299,
          stock: 0,
          image: 'https://via.placeholder.com/300x200?text=Band'
        }
      ];
      
      products.value = data;
      
      // æå–æ‰€æœ‰åˆ†ç±»
      const categorySet = new Set(data.map(product => product.category));
      categories.value = Array.from(categorySet);
      
      loading.value = false;
      
      // éšæœºæ¨¡æ‹Ÿé”™è¯¯ï¼ˆ10%æ¦‚ç‡ï¼‰
      if (Math.random() < 0.1) {
        throw new Error('ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥');
      }
    } catch (err) {
      error.value = err.message || 'åŠ è½½äº§å“æ•°æ®å¤±è´¥';
      loading.value = false;
    }
  }, 1500);
}

// æœç´¢å¤„ç†
function handleSearch() {
  // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é˜²æŠ–é€»è¾‘
}

// ç­›é€‰å¤„ç†
function handleFilter() {
  // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–çš„ç­›é€‰é€»è¾‘
}

// é‡ç½®ç­›é€‰æ¡ä»¶
function resetFilters() {
  searchQuery.value = '';
  selectedCategory.value = '';
}

// æ·»åŠ åˆ°è´­ç‰©è½¦
function addToCart(product) {
  // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è´­ç‰©è½¦é€»è¾‘
  cartNotification.value = {
    show: true,
    message: `å·²å°† ${product.name} æ·»åŠ åˆ°è´­ç‰©è½¦`
  };
  
  // 3ç§’åè‡ªåŠ¨å…³é—­é€šçŸ¥
  setTimeout(() => {
    cartNotification.value.show = false;
  }, 3000);
}

// ç»„ä»¶æŒ‚è½½æ—¶è·å–æ•°æ®
onMounted(() => {
  fetchProducts();
});
</script>

<style scoped>
.data-loading-demo {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  position: relative;
}

.filters {
  display: flex;
  justify-content: space-between;
  margin-bottom: 2rem;
}

.search-box input {
  padding: 0.75rem;
  width: 300px;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.category-filter select {
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  min-width: 150px;
}

/* åŠ è½½çŠ¶æ€ */
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid #f3f3f3;
  border-top: 5px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* é”™è¯¯çŠ¶æ€ */
.error-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
}

.error-icon {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background-color: #e74c3c;
  color: white;
  font-size: 40px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1rem;
}

.error-state button {
  margin-top: 1rem;
  padding: 0.75rem 1.5rem;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* ç©ºæ•°æ®çŠ¶æ€ */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
}

.empty-icon {
  font-size: 50px;
  margin-bottom: 1rem;
}

/* äº§å“ç½‘æ ¼ */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 2rem;
}

.product-card {
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  transition: transform 0.3s, box-shadow 0.3s;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.product-image {
  position: relative;
  height: 200px;
}

.product-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.out-of-stock-badge,
.low-stock-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 5px 10px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: bold;
}

.out-of-stock-badge {
  background-color: #e74c3c;
  color: white;
}

.low-stock-badge {
  background-color: #f39c12;
  color: white;
}

.product-info {
  padding: 1.5rem;
}

.product-info h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
}

.product-category {
  color: #666;
  font-size: 14px;
  margin-bottom: 0.5rem;
}

.product-description {
  color: #333;
  margin-bottom: 1rem;
  line-height: 1.5;
}

.product-price {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
}

.current-price {
  font-size: 20px;
  font-weight: bold;
  color: #e74c3c;
}

.original-price {
  margin-left: 10px;
  font-size: 16px;
  color: #999;
  text-decoration: line-through;
}

.add-to-cart-button {
  width: 100%;
  padding: 0.75rem;
  background-color: #3498db;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.add-to-cart-button:hover {
  background-color: #2980b9;
}

.add-to-cart-button:disabled {
  background-color: #bdc3c7;
  cursor: not-allowed;
}

/* è´­ç‰©è½¦é€šçŸ¥ */
.cart-notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: #2ecc71;
  color: white;
  padding: 1rem;
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(100px);
  opacity: 0;
  transition: transform 0.3s, opacity 0.3s;
}

.cart-notification.show {
  transform: translateY(0);
  opacity: 1;
}

.notification-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.notification-content button {
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
  margin-left: 10px;
}
</style>
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ¥å¤„ç†æ•°æ®åŠ è½½çš„ä¸åŒçŠ¶æ€ï¼š

1. åŠ è½½ä¸­çŠ¶æ€ï¼ˆ`v-if="loading"`ï¼‰
2. é”™è¯¯çŠ¶æ€ï¼ˆ`v-else-if="error"`ï¼‰
3. ç©ºæ•°æ®çŠ¶æ€ï¼ˆ`v-else-if="filteredProducts.length === 0"`ï¼‰
4. æ•°æ®å±•ç¤ºçŠ¶æ€ï¼ˆ`v-else`ï¼‰

æ­¤å¤–ï¼Œå®ƒè¿˜å±•ç¤ºäº†å¦‚ä½•åœ¨äº§å“å¡ç‰‡ä¸­ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ¥æ˜¾ç¤ºä¸åŒçš„åº“å­˜çŠ¶æ€å’Œä»·æ ¼ä¿¡æ¯ã€‚

## æ¡ä»¶æ¸²æŸ“çš„æœ€ä½³å®è·µ

åœ¨Vueä¸­ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ—¶ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼š

### 1. é€‰æ‹©åˆé€‚çš„æ¡ä»¶æ¸²æŸ“æ–¹å¼

æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼š

- å¯¹äºä¸ç»å¸¸å˜åŒ–çš„æ¡ä»¶ï¼Œä½¿ç”¨ `v-if`
- å¯¹äºé¢‘ç¹åˆ‡æ¢çš„æ¡ä»¶ï¼Œä½¿ç”¨ `v-show`
- å¯¹äºå¤šä¸ªäº’æ–¥æ¡ä»¶ï¼Œä½¿ç”¨ `v-if`/`v-else-if`/`v-else` é“¾

```vue
<!-- ç”¨æˆ·æƒé™æ§åˆ¶ï¼ˆä¸ç»å¸¸å˜åŒ–ï¼‰-->
<admin-panel v-if="user.isAdmin"></admin-panel>

<!-- å¯¹è¯æ¡†æ˜¾ç¤º/éšè—ï¼ˆé¢‘ç¹åˆ‡æ¢ï¼‰-->
<dialog-box v-show="isDialogVisible"></dialog-box>

<!-- å¤šçŠ¶æ€å¤„ç† -->
<div v-if="status === 'loading'">åŠ è½½ä¸­...</div>
<div v-else-if="status === 'success'">åŠ è½½æˆåŠŸ</div>
<div v-else-if="status === 'error'">åŠ è½½å¤±è´¥</div>
<div v-else>æœªå¼€å§‹åŠ è½½</div>
```

### 2. ä½¿ç”¨è®¡ç®—å±æ€§ç®€åŒ–æ¡ä»¶é€»è¾‘

å¯¹äºå¤æ‚çš„æ¡ä»¶é€»è¾‘ï¼Œä½¿ç”¨è®¡ç®—å±æ€§è€Œä¸æ˜¯åœ¨æ¨¡æ¿ä¸­ç›´æ¥å†™å¤æ‚è¡¨è¾¾å¼ï¼š

```vue
<!-- ä¸æ¨è -->
<div v-if="items.length > 0 && items.filter(item => item.active).length > 0 && !isLoading">
  <!-- å†…å®¹ -->
</div>

<!-- æ¨è -->
<div v-if="hasActiveItems">
  <!-- å†…å®¹ -->
</div>

<script setup>
import { computed } from 'vue';

const hasActiveItems = computed(() => {
  return items.length > 0 && 
         items.filter(item => item.active).length > 0 && 
         !isLoading;
});
</script>
```

### 3. ä½¿ç”¨ `<template>` å…ƒç´ åŒ…è£…å¤šä¸ªå…ƒç´ 

å½“éœ€è¦æ¡ä»¶æ¸²æŸ“å¤šä¸ªå…ƒç´ ä½†ä¸æƒ³å¼•å…¥é¢å¤–çš„åŒ…è£…å…ƒç´ æ—¶ï¼Œä½¿ç”¨ `<template>` å…ƒç´ ï¼š

```vue
<!-- ä¸æ¨èï¼šå¼•å…¥é¢å¤–çš„div -->
<div v-if="showContent">
  <h2>æ ‡é¢˜</h2>
  <p>æ®µè½1</p>
  <p>æ®µè½2</p>
</div>

<!-- æ¨èï¼šä½¿ç”¨template -->
<template v-if="showContent">
  <h2>æ ‡é¢˜</h2>
  <p>æ®µè½1</p>
  <p>æ®µè½2</p>
</template>
```

### 4. é¿å… v-if å’Œ v-for ä¸€èµ·ä½¿ç”¨

Vue çš„æ–‡æ¡£æ˜ç¡®å»ºè®®ä¸è¦åœ¨åŒä¸€å…ƒç´ ä¸ŠåŒæ—¶ä½¿ç”¨ `v-if` å’Œ `v-for`ï¼Œå› ä¸º `v-for` çš„ä¼˜å…ˆçº§é«˜äº `v-if`ï¼Œè¿™ä¼šå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå…ˆæ‰§è¡Œå¾ªç¯ï¼Œç„¶åå†æ£€æŸ¥æ¡ä»¶ï¼Œå³ä½¿å¤§éƒ¨åˆ†é¡¹ç›®å¯èƒ½è¢«è¿‡æ»¤æ‰ï¼š

```vue
<!-- ä¸æ¨è -->
<li v-for="user in users" v-if="user.isActive" :key="user.id">
  {{ user.name }}
</li>

<!-- æ¨èï¼šä½¿ç”¨è®¡ç®—å±æ€§è¿‡æ»¤ -->
<li v-for="user in activeUsers" :key="user.id">
  {{ user.name }}
</li>

<script setup>
import { computed } from 'vue';

const activeUsers = computed(() => {
  return users.filter(user => user.isActive);
});
</script>

<!-- æˆ–è€…ä½¿ç”¨templateåŒ…è£… -->
<template v-for="user in users" :key="user.id">
  <li v-if="user.isActive">
    {{ user.name }}
  </li>
</template>
```

### 5. ä½¿ç”¨ key ç®¡ç†å¯å¤ç”¨å…ƒç´ 

å½“ä½¿ç”¨ `v-if` å’Œ `v-else` åˆ‡æ¢å…ƒç´ æ—¶ï¼ŒVue ä¼šå°½å¯èƒ½é«˜æ•ˆåœ°å¤ç”¨å…ƒç´ ã€‚å¦‚æœä½ ä¸å¸Œæœ›å…ƒç´ è¢«å¤ç”¨ï¼ˆä¾‹å¦‚ï¼Œä¸¤ä¸ªå®Œå…¨ä¸åŒçš„è¡¨å•ï¼‰ï¼Œå¯ä»¥æ·»åŠ ä¸åŒçš„ `key` å±æ€§ï¼š

```vue
<template>
  <div>
    <div v-if="loginType === 'username'" key="username-form">
      <label>ç”¨æˆ·å</label>
      <input placeholder="è¾“å…¥ç”¨æˆ·å">
    </div>
    <div v-else key="email-form">
      <label>é‚®ç®±</label>
      <input placeholder="è¾“å…¥é‚®ç®±">
    </div>
    <button @click="toggleLoginType">åˆ‡æ¢ç™»å½•æ–¹å¼</button>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const loginType = ref('username');

function toggleLoginType() {
  loginType.value = loginType.value === 'username' ? 'email' : 'username';
}
</script>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ·»åŠ  `key` å±æ€§ç¡®ä¿äº†ä¸¤ä¸ªè¾“å…¥æ¡†ä¸ä¼šè¢«å¤ç”¨ï¼Œåˆ‡æ¢æ—¶ä¼šé‡æ–°åˆ›å»ºï¼Œè€Œä¸æ˜¯ä»…ä»…æ›´æ–°æ ‡ç­¾å’Œå ä½ç¬¦ã€‚

### 6. å¤„ç†åŠ è½½çŠ¶æ€çš„æ¨¡å¼

åœ¨å¤„ç†å¼‚æ­¥æ•°æ®æ—¶ï¼Œä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ¥æ˜¾ç¤ºä¸åŒçš„åŠ è½½çŠ¶æ€æ˜¯ä¸€ç§å¸¸è§æ¨¡å¼ï¼š

```vue
<template>æˆ‘å°†ç»§ç»­ç¼–å†™Vueæ¡ä»¶æ¸²æŸ“çš„æ–‡æ¡£å†…å®¹ã€‚

```markdown:c:\project\kphub\src\frontend\vue\02-åŸºç¡€\2.5-æ¡ä»¶æ¸²æŸ“.md
<template>
  <div>
    <!-- åŠ è½½çŠ¶æ€ -->
    <div v-if="loading" class="loading">
      <spinner-component />
      <p>åŠ è½½ä¸­...</p>
    </div>
    
    <!-- é”™è¯¯çŠ¶æ€ -->
    <div v-else-if="error" class="error">
      <p>é”™è¯¯: {{ error }}</p>
      <button @click="fetchData">é‡è¯•</button>
    </div>
    
    <!-- ç©ºæ•°æ®çŠ¶æ€ -->
    <div v-else-if="items.length === 0" class="empty">
      <p>æš‚æ— æ•°æ®</p>
    </div>
    
    <!-- æ•°æ®å±•ç¤ºçŠ¶æ€ -->
    <div v-else class="content">
      <ul>
        <li v-for="item in items" :key="item.id">
          {{ item.name }}
        </li>
      </ul>
    </div>
  </div>
</template>
```

### 7. ä½¿ç”¨å»¶è¿ŸåŠ è½½å’Œéª¨æ¶å±

å¯¹äºå¤§å‹ç»„ä»¶ï¼Œå¯ä»¥ç»“åˆæ¡ä»¶æ¸²æŸ“å’Œå¼‚æ­¥ç»„ä»¶å®ç°å»¶è¿ŸåŠ è½½ï¼Œå¹¶ä½¿ç”¨éª¨æ¶å±æå‡ç”¨æˆ·ä½“éªŒï¼š

```vue
<template>
  <div>
    <!-- ä½¿ç”¨éª¨æ¶å± -->
    <skeleton-screen v-if="!componentLoaded" />
    
    <!-- å»¶è¿ŸåŠ è½½çš„ç»„ä»¶ -->
    <heavy-component v-else />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import SkeletonScreen from './SkeletonScreen.vue';

const componentLoaded = ref(false);
const HeavyComponent = defineAsyncComponent(() => 
  import('./HeavyComponent.vue')
);

onMounted(() => {
  // æ¨¡æ‹Ÿå»¶è¿ŸåŠ è½½
  setTimeout(() => {
    componentLoaded.value = true;
  }, 1000);
});
</script>
```

## æ¡ä»¶æ¸²æŸ“çš„æ€§èƒ½è€ƒè™‘

åœ¨ä½¿ç”¨æ¡ä»¶æ¸²æŸ“æ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹æ€§èƒ½å› ç´ ï¼š

### 1. v-if vs v-show çš„æ€§èƒ½å¯¹æ¯”

- **v-if**ï¼š
  - åˆå§‹æ¸²æŸ“ï¼šå¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œä¸ä¼šæ¸²æŸ“å…ƒç´ ï¼Œåˆå§‹æ¸²æŸ“å¼€é”€è¾ƒå°
  - åˆ‡æ¢å¼€é”€ï¼šè¾ƒå¤§ï¼Œæ¶‰åŠDOMå…ƒç´ çš„åˆ›å»ºå’Œé”€æ¯
  - é€‚ç”¨åœºæ™¯ï¼šæ¡ä»¶å¾ˆå°‘æ”¹å˜çš„æƒ…å†µ

- **v-show**ï¼š
  - åˆå§‹æ¸²æŸ“ï¼šæ— è®ºæ¡ä»¶çœŸå‡éƒ½ä¼šæ¸²æŸ“å…ƒç´ ï¼Œåˆå§‹æ¸²æŸ“å¼€é”€è¾ƒå¤§
  - åˆ‡æ¢å¼€é”€ï¼šè¾ƒå°ï¼Œåªæ˜¯åˆ‡æ¢CSS displayå±æ€§
  - é€‚ç”¨åœºæ™¯ï¼šéœ€è¦é¢‘ç¹åˆ‡æ¢çš„æƒ…å†µ

### 2. å¤§å‹ç»„ä»¶çš„æ¡ä»¶æ¸²æŸ“

å¯¹äºå¤§å‹ç»„ä»¶æˆ–åŒ…å«å¤§é‡DOMå…ƒç´ çš„å†…å®¹ï¼Œé¢‘ç¹ä½¿ç”¨ `v-if` åˆ‡æ¢å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. ä½¿ç”¨ `v-show` ä»£æ›¿ `v-if`
2. ç»“åˆ `<keep-alive>` ç¼“å­˜ç»„ä»¶çŠ¶æ€
3. ä½¿ç”¨å¼‚æ­¥ç»„ä»¶å’Œå»¶è¿ŸåŠ è½½

```vue
<template>
  <div>
    <!-- ä½¿ç”¨keep-aliveç¼“å­˜ç»„ä»¶çŠ¶æ€ -->
    <keep-alive>
      <heavy-component v-if="showComponent" />
    </keep-alive>
    
    <button @click="showComponent = !showComponent">
      {{ showComponent ? 'éšè—' : 'æ˜¾ç¤º' }}ç»„ä»¶
    </button>
  </div>
</template>
```

### 3. é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

å½“æ¡ä»¶å˜åŒ–æ—¶ï¼ŒVueä¼šé‡æ–°æ¸²æŸ“ç›¸å…³DOMã€‚ä¸ºäº†é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œå¯ä»¥ï¼š

1. ä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜æ¡ä»¶ç»“æœ
2. å°†ä¸å˜çš„éƒ¨åˆ†æå–åˆ°å•ç‹¬çš„ç»„ä»¶ä¸­
3. ä½¿ç”¨ `v-once` æŒ‡ä»¤æ¸²æŸ“åªéœ€è¦ä¸€æ¬¡çš„å†…å®¹

```vue
<template>
  <div>
    <!-- é™æ€å†…å®¹åªæ¸²æŸ“ä¸€æ¬¡ -->
    <header v-once>
      <h1>åº”ç”¨æ ‡é¢˜</h1>
      <p>è¿™éƒ¨åˆ†å†…å®¹ä¸ä¼šæ”¹å˜</p>
    </header>
    
    <!-- åŠ¨æ€å†…å®¹ -->
    <main>
      <div v-if="showContent">
        <!-- åŠ¨æ€å†…å®¹ -->
      </div>
    </main>
  </div>
</template>
```

## æ¡ä»¶æ¸²æŸ“ä¸å…¶ä»–Vueç‰¹æ€§çš„ç»“åˆ

æ¡ä»¶æ¸²æŸ“å¯ä»¥ä¸Vueçš„å…¶ä»–ç‰¹æ€§ç»“åˆä½¿ç”¨ï¼Œåˆ›å»ºæ›´å¼ºå¤§çš„äº¤äº’ä½“éªŒã€‚

### 1. æ¡ä»¶æ¸²æŸ“ä¸è¿‡æ¸¡æ•ˆæœ

ç»“åˆ Vue çš„ `<transition>` ç»„ä»¶ï¼Œå¯ä»¥ä¸ºæ¡ä»¶æ¸²æŸ“çš„å…ƒç´ æ·»åŠ å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœï¼š

```vue
<template>
  <div>
    <button @click="show = !show">
      åˆ‡æ¢
    </button>
    
    <transition name="fade">
      <p v-if="show">Hello Vue!</p>
    </transition>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const show = ref(true);
</script>

<style>
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
```

### 2. æ¡ä»¶æ¸²æŸ“ä¸ç»„ä»¶æ’æ§½

å¯ä»¥ç»“åˆæ’æ§½å’Œæ¡ä»¶æ¸²æŸ“åˆ›å»ºçµæ´»çš„ç»„ä»¶æ¨¡æ¿ï¼š

```vue
<template>
  <div class="card">
    <div class="card-header">
      <slot name="header">
        <!-- é»˜è®¤æ ‡é¢˜ -->
        <h3 v-if="title">{{ title }}</h3>
      </slot>
    </div>
    
    <div class="card-body">
      <slot></slot>
    </div>
    
    <div v-if="$slots.footer" class="card-footer">
      <slot name="footer"></slot>
    </div>
  </div>
</template>

<script setup>
defineProps({
  title: String
});
</script>
```

ä½¿ç”¨è¿™ä¸ªå¡ç‰‡ç»„ä»¶ï¼š

```vue
<card title="å…¬å‘Š">
  <p>è¿™æ˜¯ä¸€ä¸ªå…¬å‘Šå†…å®¹ã€‚</p>
  
  <!-- åªæœ‰æä¾›footeræ’æ§½æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºfooteréƒ¨åˆ† -->
  <template #footer>
    <button>æŸ¥çœ‹æ›´å¤š</button>
  </template>
</card>
```

### 3. æ¡ä»¶æ¸²æŸ“ä¸Vuex/PiniaçŠ¶æ€ç®¡ç†

æ¡ä»¶æ¸²æŸ“å¯ä»¥åŸºäºçŠ¶æ€ç®¡ç†åº“ä¸­çš„çŠ¶æ€ï¼š

```vue
<template>
  <div>
    <div v-if="isLoggedIn">
      <h2>æ¬¢è¿å›æ¥ï¼Œ{{ username }}</h2>
      <button @click="logout">é€€å‡ºç™»å½•</button>
    </div>
    <div v-else>
      <h2>è¯·ç™»å½•</h2>
      <login-form />
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue';
import { useStore } from 'vuex'; // æˆ– import { useUserStore } from '@/stores/user';
import LoginForm from './LoginForm.vue';

const store = useStore();

// ä»Vuexè·å–çŠ¶æ€
const isLoggedIn = computed(() => store.state.auth.isLoggedIn);
const username = computed(() => store.state.auth.user?.username);

// ç™»å‡ºæ–¹æ³•
function logout() {
  store.dispatch('auth/logout');
}
</script>
```

## æ€»ç»“

Vueçš„æ¡ä»¶æ¸²æŸ“æ˜¯æ„å»ºåŠ¨æ€ç”¨æˆ·ç•Œé¢çš„åŸºç¡€åŠŸèƒ½ä¹‹ä¸€ã€‚é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬è¯¦ç»†äº†è§£äº†ï¼š

1. **æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤**ï¼š
   - `v-if`ï¼šæ ¹æ®æ¡ä»¶çœŸå‡å®Œå…¨æ¸²æŸ“æˆ–ç§»é™¤å…ƒç´ 
   - `v-else`ï¼šæä¾› `v-if` çš„"else å—"
   - `v-else-if`ï¼šæä¾› `v-if` çš„"else if å—"
   - `v-show`ï¼šæ ¹æ®æ¡ä»¶åˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ï¼ˆCSS displayï¼‰

2. **v-if å’Œ v-show çš„åŒºåˆ«**ï¼š
   - `v-if` æ˜¯"çœŸå®çš„"æ¡ä»¶æ¸²æŸ“ï¼Œå…ƒç´ ä¼šè¢«å®Œå…¨åˆ›å»ºæˆ–é”€æ¯
   - `v-show` åªæ˜¯åˆ‡æ¢å…ƒç´ çš„CSS displayå±æ€§
   - `v-if` æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œ`v-show` æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€
   - `v-if` æ”¯æŒ `<template>`ã€`v-else` å’Œ `v-else-if`ï¼Œè€Œ `v-show` ä¸æ”¯æŒ

3. **å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š
   - å¤šçº§èœå•æƒé™æ§åˆ¶
   - å¤šæ­¥éª¤è¡¨å•
   - æ•°æ®åŠ è½½çŠ¶æ€å¤„ç†

4. **æœ€ä½³å®è·µ**ï¼š
   - é€‰æ‹©åˆé€‚çš„æ¡ä»¶æ¸²æŸ“æ–¹å¼
   - ä½¿ç”¨è®¡ç®—å±æ€§ç®€åŒ–æ¡ä»¶é€»è¾‘
   - ä½¿ç”¨ `<template>` å…ƒç´ åŒ…è£…å¤šä¸ªå…ƒç´ 
   - é¿å… v-if å’Œ v-for ä¸€èµ·ä½¿ç”¨
   - ä½¿ç”¨ key ç®¡ç†å¯å¤ç”¨å…ƒç´ 
   - å¤„ç†åŠ è½½çŠ¶æ€çš„æ¨¡å¼
   - ä½¿ç”¨å»¶è¿ŸåŠ è½½å’Œéª¨æ¶å±

5. **æ€§èƒ½è€ƒè™‘**ï¼š
   - v-if vs v-show çš„æ€§èƒ½å¯¹æ¯”
   - å¤§å‹ç»„ä»¶çš„æ¡ä»¶æ¸²æŸ“
   - é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

6. **ä¸å…¶ä»–Vueç‰¹æ€§çš„ç»“åˆ**ï¼š
   - æ¡ä»¶æ¸²æŸ“ä¸è¿‡æ¸¡æ•ˆæœ
   - æ¡ä»¶æ¸²æŸ“ä¸ç»„ä»¶æ’æ§½
   - æ¡ä»¶æ¸²æŸ“ä¸Vuex/PiniaçŠ¶æ€ç®¡ç†

é€šè¿‡æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å¯ä»¥æ›´æœ‰æ•ˆåœ°æ„å»ºå…·æœ‰ä¸°å¯Œäº¤äº’ä½“éªŒçš„Vueåº”ç”¨ã€‚æ¡ä»¶æ¸²æŸ“ä¸ä»…å¯ä»¥ç®€åŒ–ä»£ç ï¼Œè¿˜èƒ½æé«˜åº”ç”¨çš„å¯ç»´æŠ¤æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

æ— è®ºæ˜¯ç®€å•çš„æ˜¾ç¤º/éšè—å…ƒç´ ï¼Œè¿˜æ˜¯å¤æ‚çš„å¤šçŠ¶æ€UIï¼ŒVueçš„æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤éƒ½èƒ½å¸®åŠ©ä½ ä»¥å£°æ˜å¼çš„æ–¹å¼å®ç°è¿™äº›éœ€æ±‚ï¼Œè®©ä½ çš„åº”ç”¨æ—¢ç›´è§‚åˆæ˜“äºç»´æŠ¤ã€‚

## å‚è€ƒèµ„æ–™

- [Vue.jså®˜æ–¹æ–‡æ¡£ - æ¡ä»¶æ¸²æŸ“](https://cn.vuejs.org/guide/essentials/conditional.html)
- [Vue.jså®˜æ–¹æ–‡æ¡£ - è¿‡æ¸¡æ•ˆæœ](https://cn.vuejs.org/guide/built-ins/transition.html)
- [Vue.jså®˜æ–¹æ–‡æ¡£ - æ€§èƒ½ä¼˜åŒ–](https://cn.vuejs.org/guide/best-practices/performance.html)
```

è¿™ä»½æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†Vueä¸­æ¡ä»¶æ¸²æŸ“çš„å„ç§æ–¹æ³•å’Œæœ€ä½³å®è·µï¼Œå¹¶é€šè¿‡å®é™…ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸åŒåœºæ™¯ä¸­åº”ç”¨è¿™äº›æŠ€æœ¯ã€‚æ–‡æ¡£é€‚åˆä¸åŒçº§åˆ«çš„å¼€å‘è€…é˜…è¯»ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨éƒ½æœ‰æ¶µç›–ã€‚